{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/reintegros/reintegros-frontend/components/solicitudes/SolicitudesSummary.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Box, Container, Grid, IconButton, Link, makeStyles, Typography } from '@material-ui/core';\nimport ReceiptIcon from '@material-ui/icons/Receipt';\nimport { ACTIONS, PRESTACIONES, SOLICITUDES } from '../../labels';\nimport Table from '../common/Table';\nimport { Edit } from '@material-ui/icons';\nimport { getUser, strToDate } from '../common/helpers';\nimport { format } from 'date-fns';\nconst useStyles = makeStyles(theme => ({\n  detail: {\n    backgroundColor: '#eae8e8',\n    paddingBottom: '15px'\n  },\n  container: {\n    margin: '0 15px',\n    width: '100%',\n    maxWidth: '100%'\n  }\n}));\nexport default function SolicitudesSummary({\n  solicitud,\n  prestaciones,\n  header,\n  step,\n  onEditPrestacion,\n  form\n}) {\n  var _solicitud$afiliado2, _SOLICITUDES$optionsT, _solicitud$afiliado3;\n\n  // const [factura, setFactura] = useState(null);\n  const {\n    0: delegacion,\n    1: setDelegacion\n  } = useState('');\n  const {\n    0: estadoActual,\n    1: setEstadoActual\n  } = useState('');\n  const {\n    0: currentPrestaciones,\n    1: setCurrentPrestaciones\n  } = useState(prestaciones);\n  const classes = useStyles();\n  const filesUrl = process.env.NEXT_PUBLIC_API.substring(0, process.env.NEXT_PUBLIC_API.length - 1);\n  const {\n    0: actions,\n    1: setActions\n  } = useState([]);\n  const user = getUser();\n  const renders = {\n    factura: rowData => {\n      var _rowData$solicitud, _rowData$solicitud$fa;\n\n      if (rowData !== null && rowData !== void 0 && (_rowData$solicitud = rowData.solicitud) !== null && _rowData$solicitud !== void 0 && (_rowData$solicitud$fa = _rowData$solicitud.factura) !== null && _rowData$solicitud$fa !== void 0 && _rowData$solicitud$fa.archivo) {\n        var _rowData$solicitud2, _rowData$solicitud2$f;\n\n        return /*#__PURE__*/_jsxDEV(Link, {\n          href: `${filesUrl}${rowData === null || rowData === void 0 ? void 0 : (_rowData$solicitud2 = rowData.solicitud) === null || _rowData$solicitud2 === void 0 ? void 0 : (_rowData$solicitud2$f = _rowData$solicitud2.factura) === null || _rowData$solicitud2$f === void 0 ? void 0 : _rowData$solicitud2$f.archivo}`,\n          target: \"_blank\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"primary\",\n            \"aria-label\": \"factura\",\n            component: \"span\",\n            children: /*#__PURE__*/_jsxDEV(ReceiptIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this);\n      } // Loaded file in input.\n\n\n      return /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        \"aria-label\": \"factura\",\n        component: \"span\",\n        onClick: async () => {\n          var _form$solicitud;\n\n          const factura = form === null || form === void 0 ? void 0 : (_form$solicitud = form.solicitud) === null || _form$solicitud === void 0 ? void 0 : _form$solicitud.factura[0];\n\n          if (!factura) {\n            return false;\n          }\n\n          factura.arrayBuffer().then(arrayBuffer => {\n            let blob = new Blob([new Uint8Array(arrayBuffer)], {\n              type: factura.type\n            });\n            const element = document.createElement('a');\n            element.href = URL.createObjectURL(blob);\n            element.download = 'factura';\n            document.body.appendChild(element);\n            element.click();\n          });\n        },\n        children: /*#__PURE__*/_jsxDEV(ReceiptIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this);\n    },\n    adjuntos: rowData => {\n      var _rowData$adjuntos;\n\n      return (_rowData$adjuntos = rowData.adjuntos) === null || _rowData$adjuntos === void 0 ? void 0 : _rowData$adjuntos.map((adj, i) => {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          href: `${filesUrl}${adj.archivo}`,\n          target: \"_blank\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"primary\",\n            \"aria-label\": \"factura\",\n            component: \"span\",\n            children: /*#__PURE__*/_jsxDEV(ReceiptIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this);\n      });\n    },\n    cud: rowData => {\n      var _solicitud$afiliado;\n\n      return (solicitud === null || solicitud === void 0 ? void 0 : solicitud.discapacitado) === 'Si' || (solicitud === null || solicitud === void 0 ? void 0 : solicitud.discapacitado) === 'true' ? solicitud === null || solicitud === void 0 ? void 0 : (_solicitud$afiliado = solicitud.afiliado) === null || _solicitud$afiliado === void 0 ? void 0 : _solicitud$afiliado.cud : '';\n    },\n    discapacitado: rowData => (solicitud === null || solicitud === void 0 ? void 0 : solicitud.discapacitado) === 'Si' || (solicitud === null || solicitud === void 0 ? void 0 : solicitud.discapacitado) === 'true' ? 'Si' : 'No',\n    fechaPractica: rowData => format(strToDate(rowData.fechaPractica), 'dd/MM/yyyy'),\n    fechaPracticaHasta: rowData => rowData.fechaPracticaHasta ? format(strToDate(rowData.fechaPracticaHasta), 'dd/MM/yyyy') : ''\n  };\n  useEffect(() => {\n    var _user$delegaciones;\n\n    const del = user === null || user === void 0 ? void 0 : (_user$delegaciones = user.delegaciones) === null || _user$delegaciones === void 0 ? void 0 : _user$delegaciones.find(d => d.id === (solicitud === null || solicitud === void 0 ? void 0 : solicitud.delegacion));\n    setDelegacion(del === null || del === void 0 ? void 0 : del.nombre);\n    const estado = SOLICITUDES.optionsEstadoActual.find(e => e.value === (solicitud === null || solicitud === void 0 ? void 0 : solicitud.estadoActual));\n    setEstadoActual(estado === null || estado === void 0 ? void 0 : estado.label);\n\n    if (onEditPrestacion) {\n      setActions([{\n        icon: () => /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 23\n        }, this),\n        tooltip: ACTIONS.update(SOLICITUDES.editPrestaciones),\n        onClick: (event, rowData) => {\n          handleEditPrestacion(rowData);\n        }\n      }]);\n    }\n  }, [solicitud]);\n\n  const handleEditPrestacion = rowData => {\n    onEditPrestacion && onEditPrestacion(rowData);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.detail,\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      className: classes.container,\n      children: [solicitud && header && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            gutterBottom: true,\n            children: step.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            gutterBottom: true,\n            children: step.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 2,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textSecondary\",\n              variant: \"overline\",\n              display: \"block\",\n              gutterBottom: true,\n              children: SOLICITUDES.fields.delegacionNombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textPrimary\",\n              variant: \"body1\",\n              display: \"block\",\n              gutterBottom: true,\n              children: delegacion\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 2,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textSecondary\",\n              variant: \"overline\",\n              display: \"block\",\n              gutterBottom: true,\n              children: SOLICITUDES.fields['afiliado.codigo']\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textPrimary\",\n              variant: \"body1\",\n              display: \"block\",\n              gutterBottom: true,\n              children: (_solicitud$afiliado2 = solicitud.afiliado) === null || _solicitud$afiliado2 === void 0 ? void 0 : _solicitud$afiliado2.codigo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 2,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textSecondary\",\n              variant: \"overline\",\n              display: \"block\",\n              gutterBottom: true,\n              children: SOLICITUDES.fields.estadoActual\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textPrimary\",\n              variant: \"body1\",\n              display: \"block\",\n              gutterBottom: true,\n              children: estadoActual\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 2,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textSecondary\",\n              variant: \"overline\",\n              display: \"block\",\n              gutterBottom: true,\n              children: SOLICITUDES.fields.fechaAlta\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textPrimary\",\n              variant: \"body1\",\n              display: \"block\",\n              gutterBottom: true,\n              children: solicitud.fechaAlta ? format(new Date(solicitud.fechaAlta), 'dd/MM/yyyy') : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 2,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textSecondary\",\n              variant: \"overline\",\n              display: \"block\",\n              gutterBottom: true,\n              children: SOLICITUDES.fields.tipo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textPrimary\",\n              variant: \"body1\",\n              display: \"block\",\n              gutterBottom: true,\n              children: (_SOLICITUDES$optionsT = SOLICITUDES.optionsType.find(e => e.value === (solicitud === null || solicitud === void 0 ? void 0 : solicitud.tipo))) === null || _SOLICITUDES$optionsT === void 0 ? void 0 : _SOLICITUDES$optionsT.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 2,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textSecondary\",\n              variant: \"overline\",\n              display: \"block\",\n              gutterBottom: true,\n              children: SOLICITUDES.fields.discapacitado\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textPrimary\",\n              variant: \"body1\",\n              display: \"block\",\n              gutterBottom: true,\n              children: (solicitud === null || solicitud === void 0 ? void 0 : solicitud.discapacitado) === 'true' ? `Si - ${solicitud === null || solicitud === void 0 ? void 0 : (_solicitud$afiliado3 = solicitud.afiliado) === null || _solicitud$afiliado3 === void 0 ? void 0 : _solicitud$afiliado3.cud}` : 'No'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), currentPrestaciones && /*#__PURE__*/_jsxDEV(Table, {\n        columns: Object.keys(PRESTACIONES.cols).map(key => {\n          var _ref, _renders$key;\n\n          return {\n            title: PRESTACIONES.cols[key],\n            field: key,\n            render: (_ref = (_renders$key = renders[key]) !== null && _renders$key !== void 0 ? _renders$key : PRESTACIONES.renders[key]) !== null && _ref !== void 0 ? _ref : null\n          };\n        }),\n        totalCount: currentPrestaciones.length,\n        data: currentPrestaciones,\n        title: PRESTACIONES.name,\n        options: {\n          search: false\n        },\n        pageSize: currentPrestaciones.length,\n        paging: false,\n        actions: actions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/reintegros/reintegros-frontend/components/solicitudes/SolicitudesSummary.tsx"],"names":["React","useEffect","useState","Box","Container","Grid","IconButton","Link","makeStyles","Typography","ReceiptIcon","ACTIONS","PRESTACIONES","SOLICITUDES","Table","Edit","getUser","strToDate","format","useStyles","theme","detail","backgroundColor","paddingBottom","container","margin","width","maxWidth","SolicitudesSummary","solicitud","prestaciones","header","step","onEditPrestacion","form","delegacion","setDelegacion","estadoActual","setEstadoActual","currentPrestaciones","setCurrentPrestaciones","classes","filesUrl","process","env","NEXT_PUBLIC_API","substring","length","actions","setActions","user","renders","factura","rowData","archivo","arrayBuffer","then","blob","Blob","Uint8Array","type","element","document","createElement","href","URL","createObjectURL","download","body","appendChild","click","adjuntos","map","adj","i","cud","discapacitado","afiliado","fechaPractica","fechaPracticaHasta","del","delegaciones","find","d","id","nombre","estado","optionsEstadoActual","e","value","label","icon","tooltip","update","editPrestaciones","onClick","event","handleEditPrestacion","title","description","fields","delegacionNombre","codigo","fechaAlta","Date","tipo","optionsType","Object","keys","cols","key","field","render","name","search"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Box, Container, Grid, IconButton, Link, makeStyles, Typography } from '@material-ui/core';\nimport ReceiptIcon from '@material-ui/icons/Receipt';\nimport { ACTIONS, PRESTACIONES, SOLICITUDES } from '../../labels';\nimport { send } from '../api-call/service';\nimport Modal from '../common/Modal';\nimport Table from '../common/Table';\nimport { Edit } from '@material-ui/icons';\nimport { formatDate, getUser, strToDate } from '../common/helpers';\nimport { format, parseISO } from 'date-fns';\n\ntype Props = {\n  solicitud: any;\n  header: boolean;\n  prestaciones?: any;\n  step?: any;\n  onEditPrestacion?: (data) => void;\n  form?: any;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  detail: {\n    backgroundColor: '#eae8e8',\n    paddingBottom: '15px',\n  },\n  container: {\n    margin: '0 15px',\n    width: '100%',\n    maxWidth: '100%',\n  },\n}));\n\nexport default function SolicitudesSummary({\n  solicitud,\n  prestaciones,\n  header,\n  step,\n  onEditPrestacion,\n  form,\n}: Props) {\n  // const [factura, setFactura] = useState(null);\n  const [delegacion, setDelegacion] = useState('');\n  const [estadoActual, setEstadoActual] = useState('');\n  const [currentPrestaciones, setCurrentPrestaciones] = useState(prestaciones);\n  const classes = useStyles();\n  const filesUrl = process.env.NEXT_PUBLIC_API.substring(0, process.env.NEXT_PUBLIC_API.length - 1);\n  const [actions, setActions] = useState([]);\n  const user = getUser();\n\n  const renders = {\n    factura: (rowData) => {\n      if (rowData?.solicitud?.factura?.archivo) {\n        return (\n          <Link href={`${filesUrl}${rowData?.solicitud?.factura?.archivo}`} target=\"_blank\">\n            <IconButton color=\"primary\" aria-label=\"factura\" component=\"span\">\n              <ReceiptIcon />\n            </IconButton>\n          </Link>\n        );\n      }\n\n      // Loaded file in input.\n      return (\n        <IconButton\n          color=\"primary\"\n          aria-label=\"factura\"\n          component=\"span\"\n          onClick={async () => {\n            const factura = form?.solicitud?.factura[0];\n            if (!factura) {\n              return false;\n            }\n            factura.arrayBuffer().then((arrayBuffer) => {\n              let blob = new Blob([new Uint8Array(arrayBuffer)], { type: factura.type });\n              const element = document.createElement('a');\n              element.href = URL.createObjectURL(blob);\n              element.download = 'factura';\n              document.body.appendChild(element);\n              element.click();\n            });\n          }}\n        >\n          <ReceiptIcon />\n        </IconButton>\n      );\n    },\n    adjuntos: (rowData) => {\n      return rowData.adjuntos?.map((adj, i) => {\n        return (\n          <Link href={`${filesUrl}${adj.archivo}`} target=\"_blank\">\n            <IconButton color=\"primary\" aria-label=\"factura\" component=\"span\">\n              <ReceiptIcon />\n            </IconButton>\n          </Link>\n        );\n      });\n    },\n    cud: (rowData) =>\n      solicitud?.discapacitado === 'Si' || solicitud?.discapacitado === 'true'\n        ? solicitud?.afiliado?.cud\n        : '',\n    discapacitado: (rowData) =>\n      solicitud?.discapacitado === 'Si' || solicitud?.discapacitado === 'true' ? 'Si' : 'No',\n    fechaPractica: (rowData) => format(strToDate(rowData.fechaPractica), 'dd/MM/yyyy'),\n    fechaPracticaHasta: (rowData) =>\n      rowData.fechaPracticaHasta ? format(strToDate(rowData.fechaPracticaHasta), 'dd/MM/yyyy') : '',\n  };\n\n  useEffect(() => {\n    const del = user?.delegaciones?.find((d) => d.id === solicitud?.delegacion);\n    setDelegacion(del?.nombre);\n    const estado = SOLICITUDES.optionsEstadoActual.find((e) => e.value === solicitud?.estadoActual);\n    setEstadoActual(estado?.label);\n\n    if (onEditPrestacion) {\n      setActions([\n        {\n          icon: () => <Edit />,\n          tooltip: ACTIONS.update(SOLICITUDES.editPrestaciones),\n          onClick: (event, rowData) => {\n            handleEditPrestacion(rowData);\n          },\n        },\n      ]);\n    }\n  }, [solicitud]);\n\n  const handleEditPrestacion = (rowData) => {\n    onEditPrestacion && onEditPrestacion(rowData);\n  };\n\n  return (\n    <div className={classes.detail}>\n      <Container className={classes.container}>\n        {solicitud && header && (\n          <>\n            <Box>\n              <Typography variant=\"h5\" gutterBottom>\n                {step.title}\n              </Typography>\n              <Typography variant=\"subtitle1\" gutterBottom>\n                {step.description}\n              </Typography>\n            </Box>\n            <Grid container spacing={3}>\n              <Grid item xs={2}>\n                <Typography color=\"textSecondary\" variant=\"overline\" display=\"block\" gutterBottom>\n                  {SOLICITUDES.fields.delegacionNombre}\n                </Typography>\n                <Typography color=\"textPrimary\" variant=\"body1\" display=\"block\" gutterBottom>\n                  {delegacion}\n                </Typography>\n              </Grid>\n\n              <Grid item xs={2}>\n                <Typography color=\"textSecondary\" variant=\"overline\" display=\"block\" gutterBottom>\n                  {SOLICITUDES.fields['afiliado.codigo']}\n                </Typography>\n                <Typography color=\"textPrimary\" variant=\"body1\" display=\"block\" gutterBottom>\n                  {solicitud.afiliado?.codigo}\n                </Typography>\n              </Grid>\n              <Grid item xs={2}>\n                <Typography color=\"textSecondary\" variant=\"overline\" display=\"block\" gutterBottom>\n                  {SOLICITUDES.fields.estadoActual}\n                </Typography>\n                <Typography color=\"textPrimary\" variant=\"body1\" display=\"block\" gutterBottom>\n                  {estadoActual}\n                </Typography>\n              </Grid>\n              <Grid item xs={2}>\n                <Typography color=\"textSecondary\" variant=\"overline\" display=\"block\" gutterBottom>\n                  {SOLICITUDES.fields.fechaAlta}\n                </Typography>\n                <Typography color=\"textPrimary\" variant=\"body1\" display=\"block\" gutterBottom>\n                  {/* {solicitud.fechaAlta} */}\n                  {solicitud.fechaAlta ? format(new Date(solicitud.fechaAlta), 'dd/MM/yyyy') : ''}\n                </Typography>\n              </Grid>\n              <Grid item xs={2}>\n                <Typography color=\"textSecondary\" variant=\"overline\" display=\"block\" gutterBottom>\n                  {SOLICITUDES.fields.tipo}\n                </Typography>\n                <Typography color=\"textPrimary\" variant=\"body1\" display=\"block\" gutterBottom>\n                  {SOLICITUDES.optionsType.find((e) => e.value === solicitud?.tipo)?.label}\n                </Typography>\n              </Grid>\n\n              <Grid item xs={2}>\n                <Typography color=\"textSecondary\" variant=\"overline\" display=\"block\" gutterBottom>\n                  {SOLICITUDES.fields.discapacitado}\n                </Typography>\n                <Typography color=\"textPrimary\" variant=\"body1\" display=\"block\" gutterBottom>\n                  {solicitud?.discapacitado === 'true' ? `Si - ${solicitud?.afiliado?.cud}` : 'No'}\n                </Typography>\n              </Grid>\n            </Grid>\n          </>\n        )}\n        {currentPrestaciones && (\n          <Table\n            columns={Object.keys(PRESTACIONES.cols).map((key) => ({\n              title: PRESTACIONES.cols[key],\n              field: key,\n              render: renders[key] ?? PRESTACIONES.renders[key] ?? null,\n            }))}\n            totalCount={currentPrestaciones.length}\n            data={currentPrestaciones}\n            title={PRESTACIONES.name}\n            options={{\n              search: false,\n            }}\n            pageSize={currentPrestaciones.length}\n            paging={false}\n            actions={actions}\n          />\n        )}\n      </Container>\n\n      {/* {factura && (\n        <Modal\n          customClasses={{}}\n          open={true}\n          onClose={() => setFactura(null)}\n          title={'factura'}\n          breadcrumbs={''}\n          subTitle={false}\n          actions={false}\n          onAcept={null}\n          onCancel={null}\n          maxWidth={'sm'}\n        >\n          <img src={factura} alt=\"Factura\" width={500} />\n        </Modal>\n      )} */}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}