{"ast":null,"code":"import { format, parseISO } from 'date-fns';\nimport { DELEGACIONES } from '../../labels';\nimport { CsvBuilder } from 'filefy';\n\nvar objToQueryString = function objToQueryString(obj) {\n  var str = '';\n\n  for (var key in obj) {\n    if (obj === '' || obj === null || typeof obj[key] === 'undefined') {\n      continue;\n    }\n\n    if (str !== '') {\n      str += '&';\n    }\n\n    str += key + '=' + encodeURIComponent(obj[key]);\n  }\n\n  return str;\n};\n\nvar formatDate = function formatDate(date) {\n  var d = date;\n\n  if (typeof date === 'string') {\n    if (date.search('Z') < 0) {\n      d += 'T00:00:00.000Z';\n    }\n\n    d = parseISO(d);\n  }\n\n  return format(d, 'yyyy-MM-dd');\n};\n\nvar formatDateNotification = function formatDateNotification(date) {\n  var dateISO = parseISO(date);\n  return format(dateISO, 'dd MMM');\n};\n\nvar strToDate = function strToDate(str) {\n  if (!str || str === '') {\n    return new Date();\n  }\n\n  var dateArr = str.split('-');\n  var month = Number(dateArr[1]) - 1;\n  return new Date(dateArr[0], month, dateArr[2]);\n};\n\nvar getUserDelegaciones = function getUserDelegaciones() {\n  var _user$delegaciones;\n\n  var user = getUser();\n\n  if (!(user !== null && user !== void 0 && user.delegaciones) || (user === null || user === void 0 ? void 0 : user.delegaciones.length) < 1) {\n    return [{\n      value: '',\n      label: DELEGACIONES.userWithoutDelegacionesOption\n    }];\n  }\n\n  var del = user === null || user === void 0 ? void 0 : (_user$delegaciones = user.delegaciones) === null || _user$delegaciones === void 0 ? void 0 : _user$delegaciones.map(function (d) {\n    return {\n      value: d.id,\n      label: d.nombre\n    };\n  });\n\n  if (isUserAdmin() || user !== null && user !== void 0 && user.casaCentral) {\n    del = addAllToOpts(del, 'Todas');\n  }\n\n  return del;\n};\n\nvar getUser = function getUser() {\n  if (true) {\n    return localStorage.getItem('user') && JSON.parse(localStorage.getItem('user'));\n  }\n\n  return false;\n};\n\nvar isUserAdmin = function isUserAdmin() {\n  var _user$groups, _user$groups$find;\n\n  var user = getUser();\n  return user === null || user === void 0 ? void 0 : (_user$groups = user.groups) === null || _user$groups === void 0 ? void 0 : (_user$groups$find = _user$groups.find(function (g) {\n    return g.name === 'Administrador';\n  })) === null || _user$groups$find === void 0 ? void 0 : _user$groups$find.id;\n};\n\nvar isUserCasaCentral = function isUserCasaCentral() {\n  var user = getUser();\n  return !!(user !== null && user !== void 0 && user.casaCentral);\n};\n\nvar isUserReintegro = function isUserReintegro() {\n  var _user$groups2, _user$groups2$find;\n\n  var user = getUser();\n  return user === null || user === void 0 ? void 0 : (_user$groups2 = user.groups) === null || _user$groups2 === void 0 ? void 0 : (_user$groups2$find = _user$groups2.find(function (g) {\n    return g.name === 'Reintegro';\n  })) === null || _user$groups2$find === void 0 ? void 0 : _user$groups2$find.id;\n};\n\nvar isUserDelegado = function isUserDelegado() {\n  var _user$groups3, _user$groups3$find;\n\n  var user = getUser();\n  return user === null || user === void 0 ? void 0 : (_user$groups3 = user.groups) === null || _user$groups3 === void 0 ? void 0 : (_user$groups3$find = _user$groups3.find(function (g) {\n    return g.name === 'Delegado';\n  })) === null || _user$groups3$find === void 0 ? void 0 : _user$groups3$find.id;\n};\n\nvar isUserAuditoriaAdministrativa = function isUserAuditoriaAdministrativa() {\n  var _user$groups4, _user$groups4$find;\n\n  var user = getUser();\n  return user === null || user === void 0 ? void 0 : (_user$groups4 = user.groups) === null || _user$groups4 === void 0 ? void 0 : (_user$groups4$find = _user$groups4.find(function (g) {\n    return g.name === 'AuditoriaAdministrativa';\n  })) === null || _user$groups4$find === void 0 ? void 0 : _user$groups4$find.id;\n};\n\nvar isUserAuditoriaCentral = function isUserAuditoriaCentral() {\n  var _user$groups5, _user$groups5$find;\n\n  var user = getUser();\n  return user === null || user === void 0 ? void 0 : (_user$groups5 = user.groups) === null || _user$groups5 === void 0 ? void 0 : (_user$groups5$find = _user$groups5.find(function (g) {\n    return g.name === 'AuditoriaCentral';\n  })) === null || _user$groups5$find === void 0 ? void 0 : _user$groups5$find.id;\n};\n\nvar isUserAuditoriaMedica = function isUserAuditoriaMedica() {\n  var _user$groups6, _user$groups6$find;\n\n  var user = getUser();\n  return user === null || user === void 0 ? void 0 : (_user$groups6 = user.groups) === null || _user$groups6 === void 0 ? void 0 : (_user$groups6$find = _user$groups6.find(function (g) {\n    return g.name === 'AuditoriaMedica';\n  })) === null || _user$groups6$find === void 0 ? void 0 : _user$groups6$find.id;\n};\n\nvar isUserContaduria = function isUserContaduria() {\n  var _user$groups7, _user$groups7$find;\n\n  var user = getUser();\n  return user === null || user === void 0 ? void 0 : (_user$groups7 = user.groups) === null || _user$groups7 === void 0 ? void 0 : (_user$groups7$find = _user$groups7.find(function (g) {\n    return g.name === 'Contaduria';\n  })) === null || _user$groups7$find === void 0 ? void 0 : _user$groups7$find.id;\n};\n\nvar isUserTesoreria = function isUserTesoreria() {\n  var _user$groups8, _user$groups8$find;\n\n  var user = getUser();\n  return user === null || user === void 0 ? void 0 : (_user$groups8 = user.groups) === null || _user$groups8 === void 0 ? void 0 : (_user$groups8$find = _user$groups8.find(function (g) {\n    return g.name === 'Tesoreria';\n  })) === null || _user$groups8$find === void 0 ? void 0 : _user$groups8$find.id;\n};\n\nvar isUserPresidencia = function isUserPresidencia() {\n  var _user$groups9, _user$groups9$find;\n\n  var user = getUser();\n  return user === null || user === void 0 ? void 0 : (_user$groups9 = user.groups) === null || _user$groups9 === void 0 ? void 0 : (_user$groups9$find = _user$groups9.find(function (g) {\n    return g.name === 'Presidencia';\n  })) === null || _user$groups9$find === void 0 ? void 0 : _user$groups9$find.id;\n};\n\nvar checkUserRole = function checkUserRole(role) {\n  var _user$groups10;\n\n  var user = getUser();\n  return user === null || user === void 0 ? void 0 : (_user$groups10 = user.groups) === null || _user$groups10 === void 0 ? void 0 : _user$groups10.find(function (g) {\n    return g.name === role;\n  });\n};\n\nvar userHasRole = function userHasRole(user, role) {\n  var _user$groups11;\n\n  return user === null || user === void 0 ? void 0 : (_user$groups11 = user.groups) === null || _user$groups11 === void 0 ? void 0 : _user$groups11.find(function (g) {\n    return g.name === role;\n  });\n};\n\nvar addAllToOpts = function addAllToOpts(data) {\n  var allLabel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var d = [{\n    label: allLabel || 'Todos',\n    value: ''\n  }];\n  return d.concat(data);\n};\n\nvar getFileName = function getFileName(relPath) {\n  if (!relPath) return '';\n\n  if (typeof relPath.name === 'string') {\n    return relPath.name;\n  }\n\n  var splitPath = relPath.split('/');\n  return splitPath[splitPath.length - 1];\n};\n\nvar exportTableData = function exportTableData(name, allColumns, allData) {\n  var columns = allColumns.filter(function (columnDef) {\n    return columnDef['export'] !== false;\n  });\n  var exportedData = allData.map(function (rowData) {\n    return columns.map(function (columnDef) {\n      return rowData[columnDef.field];\n    });\n  });\n  return new CsvBuilder(name + '_' + formatDate(new Date())).setDelimeter(',').setColumns(columns.map(function (columnDef) {\n    return columnDef.title;\n  })).addRows(exportedData).exportFile();\n};\n\nexport { objToQueryString, formatDate, strToDate, getUserDelegaciones, getUser, isUserAdmin, isUserDelegado, isUserReintegro, isUserAuditoriaAdministrativa, isUserAuditoriaMedica, isUserAuditoriaCentral, isUserContaduria, isUserTesoreria, isUserPresidencia, addAllToOpts, checkUserRole, userHasRole, getFileName, formatDateNotification, isUserCasaCentral, exportTableData };","map":null,"metadata":{},"sourceType":"module"}