{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/reintegros/reintegros-frontend/components/solicitudes/FormSolicitud.tsx\";\nimport { Box, Typography, Grid, IconButton } from '@material-ui/core';\nimport React, { useState, useEffect } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport FieldRender from '../builder/FieldRender';\nimport configSolicitudes from './FormConfig';\nimport AfiliadosSearch from '../afiliados/AfiliadosSearch';\nimport { SOLICITUDES } from '../../labels';\nimport { FieldType } from '../builder/FormField';\nimport { send } from '../api-call/service';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Help } from '@material-ui/icons';\nimport { getUser } from '../common/helpers';\nimport useStyles from './Stepper.styles';\nexport const FormSolicitud = ({\n  formContent,\n  step\n}) => {\n  var _formContent$solicitu, _formContent$solicitu4, _formContent$solicitu5;\n\n  const methods = useFormContext();\n  const {\n    0: afiliado,\n    1: setAfiliado\n  } = useState(formContent === null || formContent === void 0 ? void 0 : (_formContent$solicitu = formContent.solicitud) === null || _formContent$solicitu === void 0 ? void 0 : _formContent$solicitu.afiliado);\n  const user = getUser();\n  const {\n    0: dataCuenta,\n    1: setDataCuenta\n  } = useState(null);\n  const {\n    0: errorCuenta,\n    1: setErrorcuenta\n  } = useState(false);\n  const {\n    0: cuentaOpts,\n    1: setCuentaOpts\n  } = useState([]);\n  const {\n    0: factura,\n    1: setFactura\n  } = useState(null);\n  const classes = useStyles();\n\n  const handleSelectAfiliado = af => {\n    methods.setValue('solicitud.afiliado', af);\n    setAfiliado(af);\n  };\n\n  const tipoConfig = {\n    name: 'tipo',\n    type: FieldType.radio,\n    label: SOLICITUDES.fields.tipo,\n    styling: {\n      columns: 3\n    },\n    rules: {\n      required: true\n    },\n    options: [{\n      value: 'judicial',\n      label: 'Si'\n    }, {\n      value: 'noJudicial',\n      label: 'No'\n    }]\n  };\n\n  const getDataCuenta = async tipoCuenta => {\n    setDataCuenta(null);\n\n    if (tipoCuenta === 'cuentaAfiliado') {\n      setErrorcuenta(false);\n      setDataCuenta({\n        nombre: afiliado === null || afiliado === void 0 ? void 0 : afiliado.nombre,\n        apellido: afiliado === null || afiliado === void 0 ? void 0 : afiliado.apelido,\n        cbu: afiliado === null || afiliado === void 0 ? void 0 : afiliado.cbu,\n        cuitCuil: afiliado === null || afiliado === void 0 ? void 0 : afiliado.cuitCuil\n      });\n    }\n\n    if (tipoCuenta === 'cuentaJudicial' && afiliado !== null && afiliado !== void 0 && afiliado.cuentajudicial) {\n      setErrorcuenta(false);\n\n      try {\n        const cuentaJudicial = await send({\n          url: `api/cuenta-judicial/${afiliado === null || afiliado === void 0 ? void 0 : afiliado.cuentajudicial}`,\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        setDataCuenta({\n          nombre: cuentaJudicial === null || cuentaJudicial === void 0 ? void 0 : cuentaJudicial.data.nombre,\n          apellido: cuentaJudicial === null || cuentaJudicial === void 0 ? void 0 : cuentaJudicial.data.apellido,\n          cbu: cuentaJudicial === null || cuentaJudicial === void 0 ? void 0 : cuentaJudicial.data.cbu,\n          cuitCuil: cuentaJudicial === null || cuentaJudicial === void 0 ? void 0 : cuentaJudicial.data.cuitCuil\n        });\n      } catch (error) {\n        setErrorcuenta(true);\n      }\n    }\n\n    if (tipoCuenta === 'cuentaDeTerceros' && afiliado !== null && afiliado !== void 0 && afiliado.cuentadeterceros) {\n      setErrorcuenta(false);\n\n      try {\n        const cuentaDeTerceros = await send({\n          url: `api/cuenta-de-terceros/${afiliado === null || afiliado === void 0 ? void 0 : afiliado.cuentadeterceros}`,\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        setDataCuenta({\n          nombre: cuentaDeTerceros === null || cuentaDeTerceros === void 0 ? void 0 : cuentaDeTerceros.data.nombre,\n          apellido: cuentaDeTerceros === null || cuentaDeTerceros === void 0 ? void 0 : cuentaDeTerceros.data.apellido,\n          cbu: cuentaDeTerceros === null || cuentaDeTerceros === void 0 ? void 0 : cuentaDeTerceros.data.cbu,\n          cuitCuil: cuentaDeTerceros === null || cuentaDeTerceros === void 0 ? void 0 : cuentaDeTerceros.data.cuitCuil\n        });\n      } catch (error) {\n        setErrorcuenta(true);\n      }\n    }\n  };\n\n  const cuentaConfig = {\n    name: 'cuenta',\n    type: FieldType.options,\n    label: SOLICITUDES.messages.tipoForm,\n    options: cuentaOpts,\n    onChange: getDataCuenta,\n    styling: {\n      columns: 3\n    },\n    rules: {\n      required: true\n    }\n  };\n  const configFactura = {\n    name: 'factura',\n    type: FieldType.file,\n    label: SOLICITUDES.fields['factura.id'],\n    accept: 'text/plain, application/pdf, image/png, image/gif, image/jpeg',\n    styling: {\n      columns: 12\n    },\n    rules: {\n      required: true\n    }\n  };\n\n  const removeFactura = () => {\n    setFactura(null);\n  };\n\n  useEffect(() => {\n    var options = [];\n\n    if (afiliado !== null && afiliado !== void 0 && afiliado.cbu) {\n      options.push({\n        label: 'Cuenta propia del afiliado',\n        value: 'cuentaAfiliado'\n      });\n    }\n\n    if (afiliado !== null && afiliado !== void 0 && afiliado.cuentajudicial && (afiliado === null || afiliado === void 0 ? void 0 : afiliado.estadoCuentaJudicial) == 'activa') {\n      options.push({\n        label: 'Cuenta judicial',\n        value: 'cuentaJudicial'\n      });\n    }\n\n    if (afiliado !== null && afiliado !== void 0 && afiliado.cuentadeterceros && (afiliado === null || afiliado === void 0 ? void 0 : afiliado.estadoCuentaDeTerceros) == 'aprobada') {\n      options.push({\n        label: 'Cuenta de terceros',\n        value: 'cuentaDeTerceros'\n      });\n    }\n\n    if (options.length <= 0) {\n      options.push({\n        label: 'Afiliado sin cuentas asociadas, debe tener al menos una cuenta para crear una solicitud',\n        value: ''\n      });\n    }\n\n    setCuentaOpts(options);\n\n    if (!afiliado) {\n      setDataCuenta(null);\n    }\n  }, [afiliado, setCuentaOpts, setDataCuenta]);\n  useEffect(() => {\n    var _formContent$solicitu2;\n\n    if (formContent !== null && formContent !== void 0 && (_formContent$solicitu2 = formContent.solicitud) !== null && _formContent$solicitu2 !== void 0 && _formContent$solicitu2.cuenta && !dataCuenta) {\n      var _formContent$solicitu3;\n\n      getDataCuenta(formContent === null || formContent === void 0 ? void 0 : (_formContent$solicitu3 = formContent.solicitud) === null || _formContent$solicitu3 === void 0 ? void 0 : _formContent$solicitu3.cuenta);\n    }\n  }, [formContent, getDataCuenta]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        children: step.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle1\",\n        gutterBottom: true,\n        children: step.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(AfiliadosSearch, {\n          form: methods,\n          formContent: formContent,\n          onSelect: handleSelectAfiliado\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          item: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 3,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.tipoCuenta,\n              children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                title: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: SOLICITUDES.messages.toolTipJudicializada\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 26\n                }, this),\n                placement: \"top-start\",\n                arrow: true,\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  \"aria-label\": \"Help\",\n                  className: classes.tipoHelp,\n                  children: /*#__PURE__*/_jsxDEV(Help, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FieldRender, {\n                field: tipoConfig,\n                form: methods,\n                data: {\n                  tipo: formContent === null || formContent === void 0 ? void 0 : (_formContent$solicitu4 = formContent.solicitud) === null || _formContent$solicitu4 === void 0 ? void 0 : _formContent$solicitu4.tipo\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 3,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.tipoCuentaSelect,\n              children: /*#__PURE__*/_jsxDEV(FieldRender, {\n                field: cuentaConfig,\n                form: methods,\n                data: {\n                  cuenta: formContent === null || formContent === void 0 ? void 0 : (_formContent$solicitu5 = formContent.solicitud) === null || _formContent$solicitu5 === void 0 ? void 0 : _formContent$solicitu5.cuenta\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 3,\n            children: errorCuenta ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.afiliadoDetail,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                component: \"h6\",\n                color: \"error\",\n                children: SOLICITUDES.messages.errorAlObtenerCuenta\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this) : dataCuenta && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.afiliadoDetail,\n              children: /*#__PURE__*/_jsxDEV(FieldRender, {\n                form: methods,\n                field: {\n                  name: 'cuentaCBU',\n                  type: FieldType.string,\n                  label: 'CBU',\n                  disabled: true\n                },\n                data: {\n                  cuentaCBU: dataCuenta.cbu\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), [...configSolicitudes, configFactura].map((field, index) => {\n          var _field$styling, _formContent$solicitu6, _user$delegacionPrinc, _formContent$solicitu7;\n\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: ((_field$styling = field.styling) === null || _field$styling === void 0 ? void 0 : _field$styling.columns) || 12,\n            children: /*#__PURE__*/_jsxDEV(FieldRender, {\n              field: field,\n              form: methods,\n              data: {\n                afiliado: afiliado,\n                discapacitado: false,\n                estadoActual: 'sinPagos',\n                delegacion: (formContent === null || formContent === void 0 ? void 0 : (_formContent$solicitu6 = formContent.solicitud) === null || _formContent$solicitu6 === void 0 ? void 0 : _formContent$solicitu6.delegacion) || (user === null || user === void 0 ? void 0 : (_user$delegacionPrinc = user.delegacionPrincipal) === null || _user$delegacionPrinc === void 0 ? void 0 : _user$delegacionPrinc.id),\n                tipo: 'noJudicial',\n                fechaAlta: new Date().toISOString(),\n                factura: formContent === null || formContent === void 0 ? void 0 : (_formContent$solicitu7 = formContent.solicitud) === null || _formContent$solicitu7 === void 0 ? void 0 : _formContent$solicitu7.factura\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};","map":{"version":3,"sources":["/reintegros/reintegros-frontend/components/solicitudes/FormSolicitud.tsx"],"names":["Box","Typography","Grid","IconButton","React","useState","useEffect","useFormContext","FieldRender","configSolicitudes","AfiliadosSearch","SOLICITUDES","FieldType","send","Tooltip","Help","getUser","useStyles","FormSolicitud","formContent","step","methods","afiliado","setAfiliado","solicitud","user","dataCuenta","setDataCuenta","errorCuenta","setErrorcuenta","cuentaOpts","setCuentaOpts","factura","setFactura","classes","handleSelectAfiliado","af","setValue","tipoConfig","name","type","radio","label","fields","tipo","styling","columns","rules","required","options","value","getDataCuenta","tipoCuenta","nombre","apellido","apelido","cbu","cuitCuil","cuentajudicial","cuentaJudicial","url","method","headers","data","error","cuentadeterceros","cuentaDeTerceros","cuentaConfig","messages","tipoForm","onChange","configFactura","file","accept","removeFactura","push","estadoCuentaJudicial","estadoCuentaDeTerceros","length","cuenta","title","description","toolTipJudicializada","tipoHelp","tipoCuentaSelect","afiliadoDetail","errorAlObtenerCuenta","string","disabled","cuentaCBU","map","field","index","discapacitado","estadoActual","delegacion","delegacionPrincipal","id","fechaAlta","Date","toISOString"],"mappings":"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","sourcesContent":["import { Box, Typography, Grid, IconButton } from '@material-ui/core';\nimport React, { useState, useEffect } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport FieldRender from '../builder/FieldRender';\nimport configSolicitudes from './FormConfig';\nimport AfiliadosSearch from '../afiliados/AfiliadosSearch';\nimport { SOLICITUDES } from '../../labels';\nimport { FieldType } from '../builder/FormField';\nimport { send } from '../api-call/service';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Help } from '@material-ui/icons';\nimport { getUser } from '../common/helpers';\nimport useStyles from './Stepper.styles';\n\nexport const FormSolicitud = ({ formContent, step }) => {\n  const methods = useFormContext();\n  const [afiliado, setAfiliado] = useState(formContent?.solicitud?.afiliado);\n  const user = getUser();\n  const [dataCuenta, setDataCuenta] = useState(null);\n  const [errorCuenta, setErrorcuenta] = useState(false);\n  const [cuentaOpts, setCuentaOpts] = useState([]);\n  const [factura, setFactura] = useState(null);\n  const classes = useStyles();\n\n  const handleSelectAfiliado = (af) => {\n    methods.setValue('solicitud.afiliado', af);\n    setAfiliado(af);\n  };\n\n  const tipoConfig = {\n    name: 'tipo',\n    type: FieldType.radio,\n    label: SOLICITUDES.fields.tipo,\n    styling: {\n      columns: 3,\n    },\n    rules: {\n      required: true,\n    },\n    options: [\n      { value: 'judicial', label: 'Si' },\n      { value: 'noJudicial', label: 'No' },\n    ],\n  };\n\n  const getDataCuenta = async (tipoCuenta) => {\n    setDataCuenta(null);\n    if (tipoCuenta === 'cuentaAfiliado') {\n      setErrorcuenta(false);\n      setDataCuenta({\n        nombre: afiliado?.nombre,\n        apellido: afiliado?.apelido,\n        cbu: afiliado?.cbu,\n        cuitCuil: afiliado?.cuitCuil,\n      });\n    }\n    if (tipoCuenta === 'cuentaJudicial' && afiliado?.cuentajudicial) {\n      setErrorcuenta(false);\n      try {\n        const cuentaJudicial = await send({\n          url: `api/cuenta-judicial/${afiliado?.cuentajudicial}`,\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n        setDataCuenta({\n          nombre: cuentaJudicial?.data.nombre,\n          apellido: cuentaJudicial?.data.apellido,\n          cbu: cuentaJudicial?.data.cbu,\n          cuitCuil: cuentaJudicial?.data.cuitCuil,\n        });\n      } catch (error) {\n        setErrorcuenta(true);\n      }\n    }\n    if (tipoCuenta === 'cuentaDeTerceros' && afiliado?.cuentadeterceros) {\n      setErrorcuenta(false);\n      try {\n        const cuentaDeTerceros = await send({\n          url: `api/cuenta-de-terceros/${afiliado?.cuentadeterceros}`,\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n        setDataCuenta({\n          nombre: cuentaDeTerceros?.data.nombre,\n          apellido: cuentaDeTerceros?.data.apellido,\n          cbu: cuentaDeTerceros?.data.cbu,\n          cuitCuil: cuentaDeTerceros?.data.cuitCuil,\n        });\n      } catch (error) {\n        setErrorcuenta(true);\n      }\n    }\n  };\n\n  const cuentaConfig = {\n    name: 'cuenta',\n    type: FieldType.options,\n    label: SOLICITUDES.messages.tipoForm,\n    options: cuentaOpts,\n    onChange: getDataCuenta,\n    styling: {\n      columns: 3,\n    },\n    rules: {\n      required: true,\n    },\n  };\n\n  const configFactura = {\n    name: 'factura',\n    type: FieldType.file,\n    label: SOLICITUDES.fields['factura.id'],\n    accept: 'text/plain, application/pdf, image/png, image/gif, image/jpeg',\n    styling: {\n      columns: 12,\n    },\n    rules: {\n      required: true,\n    },\n  };\n\n  const removeFactura = () => {\n    setFactura(null);\n  };\n\n  useEffect(() => {\n    var options = [];\n    if (afiliado?.cbu) {\n      options.push({ label: 'Cuenta propia del afiliado', value: 'cuentaAfiliado' });\n    }\n    if (afiliado?.cuentajudicial && afiliado?.estadoCuentaJudicial == 'activa') {\n      options.push({ label: 'Cuenta judicial', value: 'cuentaJudicial' });\n    }\n    if (afiliado?.cuentadeterceros && afiliado?.estadoCuentaDeTerceros == 'aprobada') {\n      options.push({ label: 'Cuenta de terceros', value: 'cuentaDeTerceros' });\n    }\n    if (options.length <= 0) {\n      options.push({\n        label:\n          'Afiliado sin cuentas asociadas, debe tener al menos una cuenta para crear una solicitud',\n        value: '',\n      });\n    }\n    setCuentaOpts(options);\n    if (!afiliado) {\n      setDataCuenta(null);\n    }\n  }, [afiliado, setCuentaOpts, setDataCuenta]);\n\n  useEffect(() => {\n    if (formContent?.solicitud?.cuenta && !dataCuenta) {\n      getDataCuenta(formContent?.solicitud?.cuenta);\n    }\n  }, [formContent, getDataCuenta]);\n\n  return (\n    <>\n      <Box>\n        <Typography variant=\"h5\" gutterBottom>\n          {step.title}\n        </Typography>\n        <Typography variant=\"subtitle1\" gutterBottom>\n          {step.description}\n        </Typography>\n      </Box>\n      <form>\n        <Grid container spacing={2}>\n          <AfiliadosSearch\n            form={methods}\n            formContent={formContent}\n            onSelect={handleSelectAfiliado}\n          />\n          <Grid container item spacing={2}>\n            <Grid item md={3}>\n              <div className={classes.tipoCuenta}>\n                <Tooltip\n                  title={<Typography>{SOLICITUDES.messages.toolTipJudicializada}</Typography>}\n                  placement=\"top-start\"\n                  arrow={true}\n                >\n                  <IconButton aria-label=\"Help\" className={classes.tipoHelp}>\n                    <Help />\n                  </IconButton>\n                </Tooltip>\n                <FieldRender\n                  field={tipoConfig}\n                  form={methods}\n                  data={{ tipo: formContent?.solicitud?.tipo }}\n                />\n              </div>\n            </Grid>\n            <Grid item md={3}>\n              <div className={classes.tipoCuentaSelect}>\n                <FieldRender\n                  field={cuentaConfig}\n                  form={methods}\n                  data={{ cuenta: formContent?.solicitud?.cuenta }}\n                />\n              </div>\n            </Grid>\n            <Grid item md={3}>\n              {errorCuenta ? (\n                <div className={classes.afiliadoDetail}>\n                  <Typography component=\"h6\" color=\"error\">\n                    {SOLICITUDES.messages.errorAlObtenerCuenta}\n                  </Typography>\n                </div>\n              ) : (\n                dataCuenta && (\n                  <div className={classes.afiliadoDetail}>\n                    <FieldRender\n                      form={methods}\n                      field={{\n                        name: 'cuentaCBU',\n                        type: FieldType.string,\n                        label: 'CBU',\n                        disabled: true,\n                      }}\n                      data={{ cuentaCBU: dataCuenta.cbu }}\n                    />\n                  </div>\n                )\n              )}\n            </Grid>\n          </Grid>\n          {[...configSolicitudes, configFactura].map((field, index) => (\n            <Grid key={index} item md={(field.styling?.columns as any) || 12}>\n              <FieldRender\n                field={field}\n                form={methods}\n                data={{\n                  afiliado: afiliado,\n                  discapacitado: false,\n                  estadoActual: 'sinPagos',\n                  delegacion: formContent?.solicitud?.delegacion || user?.delegacionPrincipal?.id,\n                  tipo: 'noJudicial',\n                  fechaAlta: new Date().toISOString(),\n                  factura: formContent?.solicitud?.factura,\n                }}\n              />\n            </Grid>\n          ))}\n        </Grid>\n      </form>\n      {/* <Grid container spacing={2}>\n        {factura === null && (\n          <Form\n            config={configFactura}\n            data={{\n              factura: factura,\n            }}\n            onSubmit={handelSubmitFactura}\n            submitButton={\n              <Button color=\"primary\" type=\"submit\" endIcon={<PublishIcon />} style={{ margin: 3 }}>\n                Subir\n              </Button>\n            }\n            buttonsWidth={12}\n          />\n        )}\n\n        {factura !== null && (\n          <div className={classes.facturaPreview}>\n            <Typography variant=\"h6\" gutterBottom>\n              Factura\n            </Typography>\n            <Typography>\n              <Link href={factura.archivo} target=\"_blank\">\n                {factura.archivo}\n              </Link>\n              <Button className={classes.removeFactura} onClick={removeFactura}>\n                <Cancel />\n              </Button>\n            </Typography>\n          </div>\n        )}\n      </Grid> */}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}