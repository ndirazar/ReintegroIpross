{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Box, Typography, Grid, makeStyles } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport FieldRender from '../builder/FieldRender';\nimport configSolicitudes from './FormConfig';\nimport Cookies from 'universal-cookie';\nimport AfiliadosSearch from '../afiliados/AfiliadosSearch';\nimport { SOLICITUDES } from '../../labels';\nimport { FieldType } from '../builder/FormField';\nimport { send } from '../api-call/service';\nexport var FormSolicitud = function FormSolicitud(_ref) {\n  var formContent = _ref.formContent,\n      step = _ref.step;\n  var methods = useFormContext();\n\n  var _useState = useState(null),\n      afiliado = _useState[0],\n      setAfiliado = _useState[1];\n\n  var cookies = new Cookies();\n  var user = cookies.get('user');\n\n  var _useState2 = useState(null),\n      dataCuenta = _useState2[0],\n      setDataCuenta = _useState2[1];\n\n  var _useState3 = useState(false),\n      errorCuenta = _useState3[0],\n      setErrorcuenta = _useState3[1];\n\n  var handleSelectAfiliado = function handleSelectAfiliado(af) {\n    methods.setValue('solicitud.afiliado', af);\n    setAfiliado(af);\n  };\n\n  var useStyles = makeStyles(function (theme) {\n    return {\n      afiliadoDetail: {\n        paddingTop: '15px',\n        '& h6': {\n          fontSize: '14px'\n        },\n        paddingLeft: '5px'\n      },\n      tipoCuenta: {\n        padding: '20px'\n      }\n    };\n  });\n  var classes = useStyles();\n\n  var options = function options() {\n    var options = [];\n\n    if (afiliado !== null && afiliado !== void 0 && afiliado.cbu) {\n      options.push({\n        label: 'Cuenta propia del afiliado',\n        value: 'cuentaAfiliado'\n      });\n    }\n\n    if (afiliado !== null && afiliado !== void 0 && afiliado.cuentajudicial) {\n      options.push({\n        label: 'Cuenta judicial',\n        value: 'cuentaJudicial'\n      });\n    }\n\n    if (afiliado !== null && afiliado !== void 0 && afiliado.cuentadeterceros && (afiliado === null || afiliado === void 0 ? void 0 : afiliado.estadoCuentaDeTerceros) == 'aprobada') {\n      options.push({\n        label: 'Cuenta de tercercos',\n        value: 'cuentaDeTerceros'\n      });\n    }\n\n    return options;\n  };\n\n  var tipoConfig = {\n    name: 'tipo',\n    type: FieldType.radio,\n    label: 'Judicializada?',\n    styling: {\n      columns: 3\n    },\n    rules: {\n      required: true\n    },\n    options: [{\n      value: 'judicial',\n      label: 'Si'\n    }, {\n      value: 'noJudicial',\n      label: 'No'\n    }],\n    onChange: function onChange(value, form) {\n      console.log(value);\n    }\n  };\n  var cuentaConfig = {\n    name: 'cuenta',\n    type: FieldType.options,\n    label: SOLICITUDES.messages.tipoForm,\n    options: options(),\n    onChange: function () {\n      var _onChange = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value, form) {\n        var cuentaJudicial, cuentaDeTerceros;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (value === 'cuentaAfiliado') {\n                  setErrorcuenta(false);\n                  setDataCuenta({\n                    nombre: afiliado === null || afiliado === void 0 ? void 0 : afiliado.nombre,\n                    apellido: afiliado === null || afiliado === void 0 ? void 0 : afiliado.apelido,\n                    cbu: afiliado === null || afiliado === void 0 ? void 0 : afiliado.cbu,\n                    cuitCuil: afiliado === null || afiliado === void 0 ? void 0 : afiliado.cuitCuil\n                  });\n                }\n\n                if (!(value === 'cuentaJudicial')) {\n                  _context.next = 13;\n                  break;\n                }\n\n                setErrorcuenta(false);\n                _context.prev = 3;\n                _context.next = 6;\n                return send({\n                  url: \"api/cuenta-judicial/\".concat(afiliado === null || afiliado === void 0 ? void 0 : afiliado.cuentajudicial),\n                  method: 'GET',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  }\n                });\n\n              case 6:\n                cuentaJudicial = _context.sent;\n                setDataCuenta({\n                  nombre: cuentaJudicial === null || cuentaJudicial === void 0 ? void 0 : cuentaJudicial.data.nombre,\n                  apellido: cuentaJudicial === null || cuentaJudicial === void 0 ? void 0 : cuentaJudicial.data.apellido,\n                  cbu: cuentaJudicial === null || cuentaJudicial === void 0 ? void 0 : cuentaJudicial.data.cbu,\n                  cuitCuil: cuentaJudicial === null || cuentaJudicial === void 0 ? void 0 : cuentaJudicial.data.cuitCuil\n                });\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](3);\n                setErrorcuenta(true);\n\n              case 13:\n                if (!(value === 'cuentaDeTerceros')) {\n                  _context.next = 25;\n                  break;\n                }\n\n                setErrorcuenta(false);\n                _context.prev = 15;\n                _context.next = 18;\n                return send({\n                  url: \"api/cuenta-de-terceros/\".concat(afiliado === null || afiliado === void 0 ? void 0 : afiliado.cuentadeterceros),\n                  method: 'GET',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  }\n                });\n\n              case 18:\n                cuentaDeTerceros = _context.sent;\n                setDataCuenta({\n                  nombre: cuentaDeTerceros === null || cuentaDeTerceros === void 0 ? void 0 : cuentaDeTerceros.data.nombre,\n                  apellido: cuentaDeTerceros === null || cuentaDeTerceros === void 0 ? void 0 : cuentaDeTerceros.data.apellido,\n                  cbu: cuentaDeTerceros === null || cuentaDeTerceros === void 0 ? void 0 : cuentaDeTerceros.data.cbu,\n                  cuitCuil: cuentaDeTerceros === null || cuentaDeTerceros === void 0 ? void 0 : cuentaDeTerceros.data.cuitCuil\n                });\n                _context.next = 25;\n                break;\n\n              case 22:\n                _context.prev = 22;\n                _context.t1 = _context[\"catch\"](15);\n                setErrorcuenta(true);\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 10], [15, 22]]);\n      }));\n\n      function onChange(_x, _x2) {\n        return _onChange.apply(this, arguments);\n      }\n\n      return onChange;\n    }(),\n    styling: {\n      columns: 3\n    },\n    rules: {\n      required: true\n    },\n    disable: true\n  };\n  var config = [tipoConfig, cuentaConfig].concat(_toConsumableArray(configSolicitudes));\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Box, {\n      children: [/*#__PURE__*/_jsx(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        children: step.title\n      }), /*#__PURE__*/_jsx(Typography, {\n        variant: \"subtitle1\",\n        gutterBottom: true,\n        children: step.description\n      })]\n    }), /*#__PURE__*/_jsx(\"form\", {\n      children: /*#__PURE__*/_jsxs(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsx(AfiliadosSearch, {\n          form: methods,\n          formContent: formContent,\n          onSelect: handleSelectAfiliado\n        }), /*#__PURE__*/_jsxs(Grid, {\n          container: true,\n          item: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: classes.tipoCuenta,\n            children: /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              md: 3,\n              children: /*#__PURE__*/_jsx(FieldRender, {\n                field: tipoConfig,\n                form: methods,\n                data: []\n              })\n            })\n          }), /*#__PURE__*/_jsx(Grid, {\n            item: true,\n            md: 3,\n            children: /*#__PURE__*/_jsx(FieldRender, {\n              field: cuentaConfig,\n              form: methods,\n              data: []\n            })\n          }), /*#__PURE__*/_jsx(Grid, {\n            children: errorCuenta ? /*#__PURE__*/_jsx(\"div\", {\n              className: classes.afiliadoDetail,\n              children: /*#__PURE__*/_jsx(Typography, {\n                component: \"h6\",\n                color: \"error\",\n                children: SOLICITUDES.messages.errorAlObtenerCuenta\n              })\n            }) : dataCuenta && /*#__PURE__*/_jsxs(\"div\", {\n              className: classes.afiliadoDetail,\n              children: [/*#__PURE__*/_jsxs(Typography, {\n                component: \"h6\",\n                children: [/*#__PURE__*/_jsx(\"strong\", {\n                  children: \"Nombre: \"\n                }), \" \", dataCuenta.nombre, \" \", dataCuenta.apellido]\n              }), /*#__PURE__*/_jsxs(Typography, {\n                component: \"h6\",\n                children: [/*#__PURE__*/_jsx(\"strong\", {\n                  children: \"Cbu: \"\n                }), \" \", dataCuenta.cbu]\n              }), /*#__PURE__*/_jsxs(Typography, {\n                component: \"h6\",\n                children: [/*#__PURE__*/_jsx(\"strong\", {\n                  children: \"Cuit/Cuil: \"\n                }), \" \", dataCuenta.cuitCuil]\n              })]\n            })\n          })]\n        }), configSolicitudes.map(function (field, index) {\n          var _field$styling, _user$delegacionPrinc;\n\n          return /*#__PURE__*/_jsx(Grid, {\n            item: true,\n            md: ((_field$styling = field.styling) === null || _field$styling === void 0 ? void 0 : _field$styling.columns) || 12,\n            children: /*#__PURE__*/_jsx(FieldRender, {\n              field: field,\n              form: methods,\n              data: {\n                afiliado: afiliado,\n                estadoActual: 'sinPagos',\n                delegacion: (user === null || user === void 0 ? void 0 : (_user$delegacionPrinc = user.delegacionPrincipal) === null || _user$delegacionPrinc === void 0 ? void 0 : _user$delegacionPrinc.id) || null,\n                tipo: 'noJudicial',\n                fechaAlta: new Date().toISOString()\n              }\n            })\n          }, index);\n        })]\n      })\n    })]\n  });\n};","map":null,"metadata":{},"sourceType":"module"}