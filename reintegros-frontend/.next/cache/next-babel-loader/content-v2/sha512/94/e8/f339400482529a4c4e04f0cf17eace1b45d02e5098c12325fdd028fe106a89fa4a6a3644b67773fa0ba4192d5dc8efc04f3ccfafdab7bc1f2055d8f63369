{"ast":null,"code":"import _defineProperty from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/reintegros/reintegros-frontend/components/solicitudes/prestaciones/FormPrestaciones.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Box, Grid, Button, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport { NOMENCLADOR, PRESTACIONES, STEPPER_SOLICITUDES } from '../../../labels';\nimport FieldRender from '../../builder/FieldRender';\nimport AttachMoneyOutlinedIcon from '@material-ui/icons/AttachMoneyOutlined';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport useStyles from '../Stepper.styles';\nimport { ListaPrestacion } from './ListaPrestaciones';\nimport { FieldType } from '../../builder';\nimport { subDays, parseISO } from 'date-fns';\nimport { get } from '../../api-call/service';\nexport var FormPrestaciones = function FormPrestaciones(_ref) {\n  _s();\n\n  var formContent = _ref.formContent,\n      step = _ref.step,\n      addPrestacion = _ref.addPrestacion,\n      prestaciones = _ref.prestaciones,\n      removePrestacion = _ref.removePrestacion;\n  var methods = useFormContext();\n  var reset = methods.reset,\n      setValue = methods.setValue,\n      watch = methods.watch,\n      setError = methods.setError,\n      clearErrors = methods.clearErrors;\n\n  var _useState = useState(true),\n      continuar = _useState[0],\n      setContinuar = _useState[1];\n\n  var INITIAL_DATA = {\n    capitulo: '',\n    nomenclador: '',\n    isDateRange: 'date',\n    fechaPractica: '',\n    fechaPracticaHasta: '',\n    modalidad: '',\n    cobertura: '',\n    estadoActual: '',\n    prestador: '',\n    valorIprossNomenclador: '',\n    montoTotal: '',\n    valorPrestacion: '',\n    montoReintegrar: '',\n    cantidad: '1',\n    periodo: ''\n  };\n\n  var _useState2 = useState(INITIAL_DATA),\n      defaultValues = _useState2[0],\n      setDefaultValues = _useState2[1];\n\n  var classes = useStyles();\n\n  var _useState3 = useState(new Date()),\n      fechaDesde = _useState3[0],\n      setFechaDesde = _useState3[1];\n\n  var _useState4 = useState(false),\n      isDateRange = _useState4[0],\n      setIsDateRange = _useState4[1];\n\n  var _useState5 = useState(null),\n      fechaVigenciaHastaLiminit = _useState5[0],\n      setFechaVigenciaHastaLimit = _useState5[1];\n\n  var _useState6 = useState([]),\n      nomenclador = _useState6[0],\n      setNomenclador = _useState6[1];\n\n  var _useState7 = useState([]),\n      prestadores = _useState7[0],\n      setPrestadores = _useState7[1];\n\n  var prestadorQuery = '';\n  var configPrestaciones = [{\n    name: 'capitulo',\n    type: FieldType.options,\n    label: PRESTACIONES.fields.capitulo,\n    options: function () {\n      var _options = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return get('api/capitulos/');\n\n              case 2:\n                return _context.abrupt(\"return\", _context.sent.data.results.map(function (c) {\n                  return {\n                    value: c.capitulo,\n                    label: \"\".concat(c.capitulo, \" - \").concat(c.descripcion)\n                  };\n                }));\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function options() {\n        return _options.apply(this, arguments);\n      }\n\n      return options;\n    }(),\n    styling: {\n      columns: 6\n    },\n    rules: {\n      required: true\n    },\n    onChange: function () {\n      var _onChange = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(val, form) {\n        var nomencladorData;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                form.setValue('capitulo', val);\n                form.setValue('nomenclador', '');\n                form.setValue('modalidad', '');\n                form.setValue('cobertura', '');\n                form.setValue('estadoActual', '');\n                form.setValue('prestador', '');\n                form.setValue('valorIprossNomenclador', '');\n                form.setValue('montoTotal', '');\n                form.setValue('valorPrestacion', '');\n                form.setValue('montoReintegrar', '');\n                form.setValue('cantidad', '');\n                form.setValue('fechaPractica', '');\n                form.setValue('fechaPracticaHasta', '');\n\n                if (val.value) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 15:\n                _context2.next = 17;\n                return get('/api/nomenclador/?estado=activo&size=100&capitulo=' + val.value);\n\n              case 17:\n                nomencladorData = _context2.sent.data.results;\n                setNomenclador(nomencladorData);\n\n              case 19:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function onChange(_x, _x2) {\n        return _onChange.apply(this, arguments);\n      }\n\n      return onChange;\n    }()\n  }, {\n    name: 'nomenclador',\n    type: FieldType.options,\n    label: PRESTACIONES.fields.nomenclador,\n    options: function () {\n      var _options2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(form, query) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", nomenclador.map(function (n) {\n                  var _n$capitulo, _n$capitulo2;\n\n                  return {\n                    value: n.id,\n                    label: \"\".concat(n.codigo, \"-\").concat(n.descripcion, \" (\").concat((_n$capitulo = n.capitulo) === null || _n$capitulo === void 0 ? void 0 : _n$capitulo.capitulo, \"-\").concat((_n$capitulo2 = n.capitulo) === null || _n$capitulo2 === void 0 ? void 0 : _n$capitulo2.descripcion, \") - \").concat(n.fechaVigencia, \" \").concat(n.fechaVigenciaHasta ? ' / ' + n.fechaVigenciaHasta : '')\n                  };\n                }));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function options(_x3, _x4) {\n        return _options2.apply(this, arguments);\n      }\n\n      return options;\n    }(),\n    onChange: function onChange(value, form) {\n      form.setValue('nomenclador', value);\n      form.setValue('modalidad', '');\n      form.setValue('cobertura', '');\n      form.setValue('estadoActual', '');\n      form.setValue('prestador', '');\n      form.setValue('valorIprossNomenclador', '');\n      form.setValue('montoTotal', '');\n      form.setValue('valorPrestacion', '');\n      form.setValue('montoReintegrar', '');\n      form.setValue('cantidad', '');\n      form.setValue('fechaPractica', '');\n      form.setValue('fechaPracticaHasta', '');\n      var item = nomenclador.find(function (elem) {\n        return elem.id === parseInt(value === null || value === void 0 ? void 0 : value.value);\n      });\n\n      if (item) {\n        var fechaHastaLimit = item.fechaVigenciaHasta ? parseISO(item.fechaVigenciaHasta) : null;\n        setFechaVigenciaHastaLimit(fechaHastaLimit);\n        form.setValue('valorIprossNomenclador', item === null || item === void 0 ? void 0 : item.valorIpross);\n        var capitulo = form.getValues()['capitulo'];\n        var cobertura = 0;\n\n        if (capitulo === 40 || capitulo === 41 || capitulo === 43) {\n          cobertura = 90;\n        } else {\n          var isFullCobertura = prestaciones.find(function (p) {\n            return p.capitulo === 40 || p.capitulo === 41 || p.capitulo === 43;\n          });\n\n          if (isFullCobertura) {\n            cobertura = 100;\n          } else {\n            cobertura = item.modalidadPrestacion === 'ambulatorio' ? 80 : 90;\n          }\n        }\n\n        var montoTotal = parseFloat(item === null || item === void 0 ? void 0 : item.valorIpross);\n        var montoReintegrar = (parseFloat(item === null || item === void 0 ? void 0 : item.valorIpross) * (cobertura / 100)).toFixed(2);\n        form.setValue('montoReintegrar', montoReintegrar, {\n          shouldValidate: true,\n          shouldDirty: true\n        });\n        form.setValue('modalidad', item.modalidadPrestacion, {\n          shouldValidate: true,\n          shouldDirty: true\n        });\n        form.setValue('cobertura', cobertura, {\n          shouldValidate: true,\n          shouldDirty: true\n        });\n        form.setValue('estadoActual', 'enCurso');\n        form.setValue('cantidad', 1);\n        form.setValue('montoTotal', montoTotal.toFixed(2));\n      }\n    },\n    styling: {\n      columns: 12\n    },\n    rules: {\n      required: true\n    }\n  }, {\n    name: 'isDateRange',\n    type: FieldType.options,\n    label: 'Fecha / Rango',\n    options: PRESTACIONES.optionsDate,\n    styling: {\n      columns: 6\n    },\n    onChange: function onChange(val, form) {\n      setIsDateRange(val === 'range');\n    }\n  }, {\n    name: 'fechaPractica',\n    type: FieldType.date,\n    label: PRESTACIONES.fields.fechaPractica,\n    styling: {\n      columns: 6\n    },\n    rules: {\n      required: true,\n      min: subDays(new Date(), 60).toString(),\n      max: new Date().toString()\n    },\n    onChange: function onChange(val, form) {\n      setFechaDesde(val);\n    }\n  }, {\n    name: 'fechaPracticaHasta',\n    type: FieldType.date,\n    label: PRESTACIONES.fields.fechaPracticaHasta,\n    styling: {\n      columns: 6\n    },\n    rules: {\n      required: isDateRange,\n      min: fechaDesde.toString(),\n      max: fechaVigenciaHastaLiminit\n    },\n    disabled: !isDateRange\n  }, {\n    name: 'modalidad',\n    type: FieldType.options,\n    label: PRESTACIONES.fields.modalidad,\n    options: NOMENCLADOR.optionsModalidadPresentacion,\n    styling: {\n      columns: 6\n    },\n    rules: {\n      required: true\n    },\n    disabled: true\n  }, {\n    name: 'cobertura',\n    type: FieldType.string,\n    label: PRESTACIONES.fields.cobertura,\n    styling: {\n      columns: 6\n    },\n    rules: {\n      required: true\n    },\n    disabled: true,\n    prefix: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"%\"\n    }, void 0, false)\n  }, {\n    name: 'estadoActual',\n    type: FieldType.options,\n    label: PRESTACIONES.fields['estadoActual'],\n    options: PRESTACIONES.optionsEstadoActual,\n    styling: {\n      columns: 6\n    },\n    rules: {\n      required: true\n    },\n    disabled: true\n  }, {\n    name: 'prestador',\n    type: FieldType.options,\n    label: PRESTACIONES.fields.prestador,\n    options: function () {\n      var _options3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(form, query) {\n        var _yield$get, _yield$get$data;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(prestadorQuery === '')) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", []);\n\n              case 2:\n                _context4.next = 4;\n                return get(\"api/prestadores/?profEstado=alta&matricula=\".concat(prestadorQuery));\n\n              case 4:\n                _context4.t1 = _yield$get = _context4.sent;\n                _context4.t0 = _context4.t1 === null;\n\n                if (_context4.t0) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                _context4.t0 = _yield$get === void 0;\n\n              case 8:\n                if (!_context4.t0) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                _context4.t2 = void 0;\n                _context4.next = 13;\n                break;\n\n              case 12:\n                _context4.t2 = (_yield$get$data = _yield$get.data) === null || _yield$get$data === void 0 ? void 0 : _yield$get$data.results.map(function (p) {\n                  return {\n                    value: p.id,\n                    label: \"\".concat(p.matricula, \" - \").concat(p.nombre, \" \").concat(p.apellido)\n                  };\n                });\n\n              case 13:\n                return _context4.abrupt(\"return\", _context4.t2);\n\n              case 14:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function options(_x5, _x6) {\n        return _options3.apply(this, arguments);\n      }\n\n      return options;\n    }(),\n    onUpdate: function () {\n      var _onUpdate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(val) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                prestadorQuery = val;\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function onUpdate(_x7) {\n        return _onUpdate.apply(this, arguments);\n      }\n\n      return onUpdate;\n    }(),\n    styling: {\n      columns: 6\n    },\n    rules: {\n      required: true\n    },\n    help: 'Si no encuentra el prestador, solicite el alta al Administrador del sistema.'\n  }, {\n    name: 'br',\n    type: FieldType.br,\n    label: ''\n  }, {\n    name: 'valorIprossNomenclador',\n    type: FieldType.string,\n    label: PRESTACIONES.fields.valorIprossNomenclador,\n    styling: {\n      columns: 3\n    },\n    rules: {\n      required: true\n    },\n    disabled: true,\n    prefix: /*#__PURE__*/_jsxDEV(AttachMoneyOutlinedIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 15\n    }, _this)\n  }, {\n    name: 'montoTotal',\n    type: FieldType.string,\n    label: PRESTACIONES.fields.montoTotal,\n    styling: {\n      columns: 3\n    },\n    rules: {\n      min: 1,\n      required: true\n    },\n    disabled: true\n  }, {\n    name: 'valorPrestacion',\n    type: FieldType[\"float\"],\n    label: PRESTACIONES.fields.valorPrestacion,\n    styling: {\n      columns: 3\n    },\n    rules: {\n      required: true\n    },\n    prefix: /*#__PURE__*/_jsxDEV(AttachMoneyOutlinedIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 15\n    }, _this)\n  }, {\n    name: 'montoReintegrar',\n    type: FieldType.string,\n    label: PRESTACIONES.fields.montoReintegrar,\n    styling: {\n      columns: 3\n    },\n    rules: {\n      required: true\n    },\n    disabled: true,\n    prefix: /*#__PURE__*/_jsxDEV(AttachMoneyOutlinedIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 15\n    }, _this)\n  }, {\n    name: 'cantidad',\n    type: FieldType[\"int\"],\n    label: PRESTACIONES.fields.cantidad,\n    styling: {\n      columns: 6\n    },\n    rules: {\n      min: 1,\n      required: true\n    },\n    onChange: function onChange(val, form) {\n      var valorIpross = form.getValues()['valorIprossNomenclador'];\n      var montoTotal = valorIpross * val;\n      form.setValue('montoTotal', montoTotal.toFixed(2));\n      var cobertura = form.getValues()['cobertura'];\n      var montoReintegrar = (valorIpross * val * (parseInt(cobertura) / 100)).toFixed(2);\n      form.setValue('montoReintegrar', montoReintegrar);\n    }\n  }, {\n    name: 'periodo',\n    type: FieldType.options,\n    options: NOMENCLADOR.optionsPeriodoTope,\n    label: PRESTACIONES.fields.periodo,\n    styling: {\n      columns: 6\n    },\n    rules: {\n      required: true\n    }\n  }];\n  useEffect(function () {\n    reset(_objectSpread({}, formContent.two), {\n      errors: true\n    });\n  }, []);\n\n  var validatePrestacion = function validatePrestacion() {\n    var isValid = true;\n    var errors = [];\n    clearErrors();\n    configPrestaciones.map(function (field) {\n      var _field$rules;\n\n      if (field !== null && field !== void 0 && (_field$rules = field.rules) !== null && _field$rules !== void 0 && _field$rules.required && !methods.getValues()[field.name]) {\n        errors.push(field.name);\n        setError(field.name, {\n          type: 'required'\n        });\n        isValid = false;\n      }\n    });\n    return isValid;\n  };\n\n  var handleAddPrestacion = function handleAddPrestacion() {\n    var continuar = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    var isValid = validatePrestacion();\n\n    if (!isValid) {\n      return false;\n    }\n\n    addPrestacion();\n    clearForm(); // Fix issue where autocomplete field doesn't clear it's value\n\n    setContinuar(false);\n    setTimeout(function () {\n      setContinuar(continuar);\n      window.scrollTo(0, 150);\n    }, 5);\n  };\n\n  var handleCancelPrestacion = function handleCancelPrestacion() {\n    clearForm();\n    setContinuar(false);\n    window.scrollTo(0, 150);\n  };\n\n  var clearForm = function clearForm() {\n    for (var property in INITIAL_DATA) {\n      setValue(property, INITIAL_DATA[property]);\n    }\n\n    setDefaultValues(INITIAL_DATA);\n    setIsDateRange(false);\n    setFechaVigenciaHastaLimit(null);\n    setNomenclador([]);\n    prestadorQuery = '';\n    reset(INITIAL_DATA);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    margin: 3,\n    children: [/*#__PURE__*/_jsxDEV(ListaPrestacion, {\n      prestaciones: prestaciones,\n      buttons: [{\n        action: removePrestacion,\n        icon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 53\n        }, _this)\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, _this), continuar && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        className: classes.form,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            gutterBottom: true,\n            children: step.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            gutterBottom: true,\n            children: step.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              children: [configPrestaciones.map(function (field, index) {\n                var _field$styling;\n\n                return /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  md: ((_field$styling = field.styling) === null || _field$styling === void 0 ? void 0 : _field$styling.columns) || 12,\n                  children: /*#__PURE__*/_jsxDEV(FieldRender, {\n                    field: field,\n                    form: methods,\n                    data: defaultValues\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 23\n                  }, _this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 21\n                }, _this);\n              }), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 12,\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"primary\",\n                  onClick: function onClick() {\n                    handleAddPrestacion(true);\n                  },\n                  className: classes.button,\n                  children: STEPPER_SOLICITUDES.saveAndContinue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"primary\",\n                  onClick: function onClick() {\n                    handleAddPrestacion(false);\n                  },\n                  className: classes.button,\n                  children: STEPPER_SOLICITUDES.save\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"default\",\n                  onClick: function onClick() {\n                    handleCancelPrestacion();\n                  },\n                  className: classes.button,\n                  children: STEPPER_SOLICITUDES.cancel\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false), !continuar && /*#__PURE__*/_jsxDEV(Box, {\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          md: 12,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: function onClick() {\n              clearForm();\n              setContinuar(true);\n            },\n            className: classes.button,\n            children: STEPPER_SOLICITUDES.addPrestacion\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 426,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(FormPrestaciones, \"oimwNTR2OOunzPlcYSWSVGn9Z1w=\", false, function () {\n  return [useFormContext, useStyles];\n});\n\n_c = FormPrestaciones;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormPrestaciones\");","map":{"version":3,"sources":["/reintegros/reintegros-frontend/components/solicitudes/prestaciones/FormPrestaciones.tsx"],"names":["Box","Grid","Button","Typography","React","useEffect","useState","useFormContext","NOMENCLADOR","PRESTACIONES","STEPPER_SOLICITUDES","FieldRender","AttachMoneyOutlinedIcon","DeleteIcon","useStyles","ListaPrestacion","FieldType","subDays","parseISO","get","FormPrestaciones","formContent","step","addPrestacion","prestaciones","removePrestacion","methods","reset","setValue","watch","setError","clearErrors","continuar","setContinuar","INITIAL_DATA","capitulo","nomenclador","isDateRange","fechaPractica","fechaPracticaHasta","modalidad","cobertura","estadoActual","prestador","valorIprossNomenclador","montoTotal","valorPrestacion","montoReintegrar","cantidad","periodo","defaultValues","setDefaultValues","classes","Date","fechaDesde","setFechaDesde","setIsDateRange","fechaVigenciaHastaLiminit","setFechaVigenciaHastaLimit","setNomenclador","prestadores","setPrestadores","prestadorQuery","configPrestaciones","name","type","options","label","fields","data","results","map","c","value","descripcion","styling","columns","rules","required","onChange","val","form","nomencladorData","query","n","id","codigo","fechaVigencia","fechaVigenciaHasta","item","find","elem","parseInt","fechaHastaLimit","valorIpross","getValues","isFullCobertura","p","modalidadPrestacion","parseFloat","toFixed","shouldValidate","shouldDirty","optionsDate","date","min","toString","max","disabled","optionsModalidadPresentacion","string","prefix","optionsEstadoActual","matricula","nombre","apellido","onUpdate","help","br","optionsPeriodoTope","two","errors","validatePrestacion","isValid","field","push","handleAddPrestacion","clearForm","setTimeout","window","scrollTo","handleCancelPrestacion","property","action","icon","title","description","index","button","saveAndContinue","save","cancel"],"mappings":"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","sourcesContent":["import { Box, Grid, Button, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport { NOMENCLADOR, PRESTACIONES, STEPPER_SOLICITUDES } from '../../../labels';\nimport FieldRender from '../../builder/FieldRender';\nimport { FormConfig } from '../../builder/FormConfig';\nimport { FormDataPrestaciones } from './types';\nimport AttachMoneyOutlinedIcon from '@material-ui/icons/AttachMoneyOutlined';\n\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport useStyles from '../Stepper.styles';\nimport { ListaPrestacion } from './ListaPrestaciones';\nimport { FieldType } from '../../builder';\nimport { subDays, addDays, format, parseISO } from 'date-fns';\nimport { get } from '../../api-call/service';\n\nexport const FormPrestaciones = ({\n  formContent,\n  step,\n  addPrestacion,\n  prestaciones,\n  removePrestacion,\n}) => {\n  const methods = useFormContext();\n  const { reset, setValue, watch, setError, clearErrors } = methods;\n  const [continuar, setContinuar] = useState(true);\n  const INITIAL_DATA = {\n    capitulo: '',\n    nomenclador: '',\n    isDateRange: 'date',\n    fechaPractica: '',\n    fechaPracticaHasta: '',\n    modalidad: '',\n    cobertura: '',\n    estadoActual: '',\n    prestador: '',\n    valorIprossNomenclador: '',\n    montoTotal: '',\n    valorPrestacion: '',\n    montoReintegrar: '',\n    cantidad: '1',\n    periodo: '',\n  };\n  const [defaultValues, setDefaultValues] = useState(INITIAL_DATA);\n  const classes = useStyles();\n  const [fechaDesde, setFechaDesde] = useState(new Date());\n  const [isDateRange, setIsDateRange] = useState(false);\n  const [fechaVigenciaHastaLiminit, setFechaVigenciaHastaLimit] = useState(null);\n  const [nomenclador, setNomenclador] = useState([]);\n  const [prestadores, setPrestadores] = useState([]);\n  let prestadorQuery = '';\n  const configPrestaciones: FormConfig<FormDataPrestaciones> = [\n    {\n      name: 'capitulo',\n      type: FieldType.options,\n      label: PRESTACIONES.fields.capitulo,\n      options: async () => {\n        return (await get('api/capitulos/')).data.results.map((c) => ({\n          value: c.capitulo,\n          label: `${c.capitulo} - ${c.descripcion}`,\n        }));\n      },\n      styling: {\n        columns: 6,\n      },\n      rules: {\n        required: true,\n      },\n      onChange: async (val, form) => {\n        form.setValue('capitulo', val);\n        form.setValue('nomenclador', '');\n        form.setValue('modalidad', '');\n        form.setValue('cobertura', '');\n        form.setValue('estadoActual', '');\n        form.setValue('prestador', '');\n        form.setValue('valorIprossNomenclador', '');\n        form.setValue('montoTotal', '');\n        form.setValue('valorPrestacion', '');\n        form.setValue('montoReintegrar', '');\n        form.setValue('cantidad', '');\n        form.setValue('fechaPractica', '');\n        form.setValue('fechaPracticaHasta', '');\n\n        if (!val.value) {\n          return;\n        }\n\n        let nomencladorData = (\n          await get('/api/nomenclador/?estado=activo&size=100&capitulo=' + val.value)\n        ).data.results;\n        setNomenclador(nomencladorData);\n      },\n    },\n    {\n      name: 'nomenclador',\n      type: FieldType.options,\n      label: PRESTACIONES.fields.nomenclador,\n      options: async (form, query) => {\n        return nomenclador.map((n) => ({\n          value: n.id,\n          label: `${n.codigo}-${n.descripcion} (${n.capitulo?.capitulo}-${\n            n.capitulo?.descripcion\n          }) - ${n.fechaVigencia} ${n.fechaVigenciaHasta ? ' / ' + n.fechaVigenciaHasta : ''}`,\n        }));\n      },\n      onChange: (value, form) => {\n        form.setValue('nomenclador', value);\n        form.setValue('modalidad', '');\n        form.setValue('cobertura', '');\n        form.setValue('estadoActual', '');\n        form.setValue('prestador', '');\n        form.setValue('valorIprossNomenclador', '');\n        form.setValue('montoTotal', '');\n        form.setValue('valorPrestacion', '');\n        form.setValue('montoReintegrar', '');\n        form.setValue('cantidad', '');\n        form.setValue('fechaPractica', '');\n        form.setValue('fechaPracticaHasta', '');\n\n        const item = nomenclador.find((elem) => elem.id === parseInt(value?.value));\n\n        if (item) {\n          const fechaHastaLimit = item.fechaVigenciaHasta\n            ? parseISO(item.fechaVigenciaHasta)\n            : null;\n          setFechaVigenciaHastaLimit(fechaHastaLimit);\n          form.setValue('valorIprossNomenclador', item?.valorIpross);\n\n          const capitulo = form.getValues()['capitulo'];\n          let cobertura = 0;\n          if (capitulo === 40 || capitulo === 41 || capitulo === 43) {\n            cobertura = 90;\n          } else {\n            const isFullCobertura = prestaciones.find(\n              (p) => p.capitulo === 40 || p.capitulo === 41 || p.capitulo === 43,\n            );\n            if (isFullCobertura) {\n              cobertura = 100;\n            } else {\n              cobertura = item.modalidadPrestacion === 'ambulatorio' ? 80 : 90;\n            }\n          }\n\n          const montoTotal = parseFloat(item?.valorIpross);\n\n          const montoReintegrar = (parseFloat(item?.valorIpross) * (cobertura / 100)).toFixed(2);\n\n          form.setValue('montoReintegrar', montoReintegrar, {\n            shouldValidate: true,\n            shouldDirty: true,\n          });\n          form.setValue('modalidad', item.modalidadPrestacion, {\n            shouldValidate: true,\n            shouldDirty: true,\n          });\n          form.setValue('cobertura', cobertura, {\n            shouldValidate: true,\n            shouldDirty: true,\n          });\n          form.setValue('estadoActual', 'enCurso');\n          form.setValue('cantidad', 1);\n          form.setValue('montoTotal', montoTotal.toFixed(2));\n        }\n      },\n      styling: {\n        columns: 12,\n      },\n      rules: {\n        required: true,\n      },\n    },\n    {\n      name: 'isDateRange',\n      type: FieldType.options,\n      label: 'Fecha / Rango',\n      options: PRESTACIONES.optionsDate,\n      styling: {\n        columns: 6,\n      },\n      onChange: (val, form) => {\n        setIsDateRange(val === 'range');\n      },\n    },\n    {\n      name: 'fechaPractica',\n      type: FieldType.date,\n      label: PRESTACIONES.fields.fechaPractica,\n      styling: {\n        columns: 6,\n      },\n      rules: {\n        required: true,\n        min: subDays(new Date(), 60).toString(),\n        max: new Date().toString(),\n      },\n      onChange: (val, form) => {\n        setFechaDesde(val);\n      },\n    },\n    {\n      name: 'fechaPracticaHasta',\n      type: FieldType.date,\n      label: PRESTACIONES.fields.fechaPracticaHasta,\n      styling: {\n        columns: 6,\n      },\n      rules: {\n        required: isDateRange,\n        min: fechaDesde.toString(),\n        max: fechaVigenciaHastaLiminit,\n      },\n      disabled: !isDateRange,\n    },\n    {\n      name: 'modalidad',\n      type: FieldType.options,\n      label: PRESTACIONES.fields.modalidad,\n      options: NOMENCLADOR.optionsModalidadPresentacion,\n      styling: {\n        columns: 6,\n      },\n      rules: {\n        required: true,\n      },\n      disabled: true,\n    },\n    {\n      name: 'cobertura',\n      type: FieldType.string,\n      label: PRESTACIONES.fields.cobertura,\n      styling: {\n        columns: 6,\n      },\n      rules: {\n        required: true,\n      },\n      disabled: true,\n      prefix: <>%</>,\n    },\n    {\n      name: 'estadoActual',\n      type: FieldType.options,\n      label: PRESTACIONES.fields['estadoActual'],\n      options: PRESTACIONES.optionsEstadoActual,\n      styling: {\n        columns: 6,\n      },\n      rules: {\n        required: true,\n      },\n      disabled: true,\n    },\n    {\n      name: 'prestador',\n      type: FieldType.options,\n      label: PRESTACIONES.fields.prestador,\n      options: async (form, query) => {\n        if (prestadorQuery === '') {\n          return [];\n        }\n\n        return (\n          await get(`api/prestadores/?profEstado=alta&matricula=${prestadorQuery}`)\n        )?.data?.results.map((p) => ({\n          value: p.id,\n          label: `${p.matricula} - ${p.nombre} ${p.apellido}`,\n        }));\n      },\n      onUpdate: async (val) => {\n        prestadorQuery = val;\n      },\n      styling: {\n        columns: 6,\n      },\n      rules: {\n        required: true,\n      },\n      help: 'Si no encuentra el prestador, solicite el alta al Administrador del sistema.',\n    },\n    {\n      name: 'br',\n      type: FieldType.br,\n      label: '',\n    },\n    {\n      name: 'valorIprossNomenclador',\n      type: FieldType.string,\n      label: PRESTACIONES.fields.valorIprossNomenclador,\n      styling: {\n        columns: 3,\n      },\n      rules: {\n        required: true,\n      },\n      disabled: true,\n      prefix: <AttachMoneyOutlinedIcon />,\n    },\n    {\n      name: 'montoTotal',\n      type: FieldType.string,\n      label: PRESTACIONES.fields.montoTotal,\n      styling: {\n        columns: 3,\n      },\n      rules: {\n        min: 1,\n        required: true,\n      },\n      disabled: true,\n    },\n    {\n      name: 'valorPrestacion',\n      type: FieldType.float,\n      label: PRESTACIONES.fields.valorPrestacion,\n      styling: {\n        columns: 3,\n      },\n      rules: {\n        required: true,\n      },\n      prefix: <AttachMoneyOutlinedIcon />,\n    },\n    {\n      name: 'montoReintegrar',\n      type: FieldType.string,\n      label: PRESTACIONES.fields.montoReintegrar,\n      styling: {\n        columns: 3,\n      },\n      rules: {\n        required: true,\n      },\n      disabled: true,\n      prefix: <AttachMoneyOutlinedIcon />,\n    },\n    {\n      name: 'cantidad',\n      type: FieldType.int,\n      label: PRESTACIONES.fields.cantidad,\n      styling: {\n        columns: 6,\n      },\n      rules: {\n        min: 1,\n        required: true,\n      },\n      onChange: (val, form) => {\n        const valorIpross = form.getValues()['valorIprossNomenclador'];\n        const montoTotal = valorIpross * val;\n        form.setValue('montoTotal', montoTotal.toFixed(2));\n        const cobertura = form.getValues()['cobertura'];\n\n        const montoReintegrar = (valorIpross * val * (parseInt(cobertura) / 100)).toFixed(2);\n\n        form.setValue('montoReintegrar', montoReintegrar);\n      },\n    },\n    {\n      name: 'periodo',\n      type: FieldType.options,\n      options: NOMENCLADOR.optionsPeriodoTope,\n      label: PRESTACIONES.fields.periodo,\n      styling: {\n        columns: 6,\n      },\n      rules: {\n        required: true,\n      },\n    },\n  ];\n\n  useEffect(() => {\n    reset({ ...formContent.two }, { errors: true });\n  }, []);\n\n  const validatePrestacion = () => {\n    let isValid = true;\n    let errors = [];\n    clearErrors();\n    configPrestaciones.map((field) => {\n      if (field?.rules?.required && !methods.getValues()[field.name]) {\n        errors.push(field.name);\n        setError(field.name, { type: 'required' });\n        isValid = false;\n      }\n    });\n    return isValid;\n  };\n\n  const handleAddPrestacion = (continuar = true) => {\n    const isValid = validatePrestacion();\n    if (!isValid) {\n      return false;\n    }\n    addPrestacion();\n    clearForm();\n\n    // Fix issue where autocomplete field doesn't clear it's value\n    setContinuar(false);\n\n    setTimeout(() => {\n      setContinuar(continuar);\n      window.scrollTo(0, 150);\n    }, 5);\n  };\n\n  const handleCancelPrestacion = () => {\n    clearForm();\n    setContinuar(false);\n    window.scrollTo(0, 150);\n  };\n\n  const clearForm = () => {\n    for (const property in INITIAL_DATA) {\n      setValue(property, INITIAL_DATA[property]);\n    }\n    setDefaultValues(INITIAL_DATA);\n    setIsDateRange(false);\n    setFechaVigenciaHastaLimit(null);\n    setNomenclador([]);\n    prestadorQuery = '';\n    reset(INITIAL_DATA);\n  };\n\n  return (\n    <Box margin={3}>\n      <ListaPrestacion\n        prestaciones={prestaciones}\n        buttons={[{ action: removePrestacion, icon: <DeleteIcon /> }]}\n      />\n      {continuar && (\n        <>\n          <Box className={classes.form}>\n            <Box>\n              <Typography variant=\"h5\" gutterBottom>\n                {step.title}\n              </Typography>\n              <Typography variant=\"subtitle1\" gutterBottom>\n                {step.description}\n              </Typography>\n            </Box>\n            <form>\n              <fieldset>\n                <Grid container spacing={2}>\n                  {configPrestaciones.map((field, index) => (\n                    <Grid key={index} item md={(field.styling?.columns as any) || 12}>\n                      <FieldRender field={field} form={methods} data={defaultValues} />\n                    </Grid>\n                  ))}\n                  <Grid item md={12}>\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={() => {\n                        handleAddPrestacion(true);\n                      }}\n                      className={classes.button}\n                    >\n                      {STEPPER_SOLICITUDES.saveAndContinue}\n                    </Button>\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={() => {\n                        handleAddPrestacion(false);\n                      }}\n                      className={classes.button}\n                    >\n                      {STEPPER_SOLICITUDES.save}\n                    </Button>\n                    <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      onClick={() => {\n                        handleCancelPrestacion();\n                      }}\n                      className={classes.button}\n                    >\n                      {STEPPER_SOLICITUDES.cancel}\n                    </Button>\n                  </Grid>\n                </Grid>\n              </fieldset>\n            </form>\n          </Box>\n        </>\n      )}\n      {!continuar && (\n        <Box>\n          <Grid container spacing={2}>\n            <Grid item md={12}>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  clearForm();\n                  setContinuar(true);\n                }}\n                className={classes.button}\n              >\n                {STEPPER_SOLICITUDES.addPrestacion}\n              </Button>\n            </Grid>\n          </Grid>\n        </Box>\n      )}\n    </Box>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}