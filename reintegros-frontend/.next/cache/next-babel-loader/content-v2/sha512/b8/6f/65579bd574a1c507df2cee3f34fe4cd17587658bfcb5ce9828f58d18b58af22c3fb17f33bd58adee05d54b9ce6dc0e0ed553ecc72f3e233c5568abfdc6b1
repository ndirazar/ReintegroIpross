{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { MenuItem, Select, Switch } from '@material-ui/core';\nimport React from 'react';\nimport { USERS } from '../../labels';\nimport Table from '../common/Table';\nimport SelectGroups from './SelectGroups';\nimport SelectDelegacion from './SelectDelegacion';\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\nexport default function UsersList(_ref) {\n  var data = _ref.data,\n      _delegaciones = _ref.delegaciones,\n      grupos = _ref.grupos,\n      onUserDeactivate = _ref.onUserDeactivate,\n      onhandleSetGroups = _ref.onhandleSetGroups,\n      onhandleSetDelegaciones = _ref.onhandleSetDelegaciones,\n      onhandleSetDelegacionPrincipal = _ref.onhandleSetDelegacionPrincipal,\n      onSync = _ref.onSync;\n\n  var onSetUserGroups = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(groupsSelected, userId) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              result = [];\n\n              if (grupos !== undefined) {\n                groupsSelected.forEach(function (groupSelected) {\n                  var grupo = grupos.results.find(function (grupo) {\n                    return grupo.name === groupSelected;\n                  });\n                  result.push(grupo.id);\n                });\n                onhandleSetGroups(result, userId);\n              }\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSetUserGroups(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onSetDelegaciones = function onSetDelegaciones(delegacionesSelected, userId) {\n    var result = [];\n\n    if (_delegaciones !== undefined) {\n      delegacionesSelected.forEach(function (delegacionSelected) {\n        var delegacion = _delegaciones.results.find(function (delegacion) {\n          return delegacion.nombre === delegacionSelected;\n        });\n\n        result.push(delegacion.id);\n      });\n      onhandleSetDelegaciones(result, userId);\n    }\n  };\n\n  var onSetDelegacionPrincipal = function onSetDelegacionPrincipal(delegacionId, userId) {\n    onhandleSetDelegacionPrincipal(delegacionId, userId);\n  };\n\n  var dynamicRenders = {\n    is_active: function is_active(rowData) {\n      return /*#__PURE__*/_jsx(Switch, {\n        checked: rowData.is_active === true,\n        onChange: function onChange() {\n          return onUserDeactivate(rowData === null || rowData === void 0 ? void 0 : rowData.id, rowData.is_active);\n        },\n        name: \"active-switch\",\n        color: \"primary\"\n      });\n    },\n    groups: function groups(rowData) {\n      return /*#__PURE__*/_jsx(SelectGroups, {\n        grupos: grupos,\n        rowData: rowData,\n        onSetUserGroups: onSetUserGroups\n      });\n    },\n    delegaciones: function delegaciones(rowData) {\n      return /*#__PURE__*/_jsx(SelectDelegacion, {\n        delegaciones: _delegaciones,\n        rowData: rowData,\n        onSetDelegaciones: onSetDelegaciones\n      });\n    },\n    delegacionPrincipal: function delegacionPrincipal(rowData) {\n      var _rowData$delegacionPr;\n\n      return /*#__PURE__*/_jsx(Select, {\n        onChange: function onChange(event) {\n          onSetDelegacionPrincipal(event.target.value, rowData.id);\n        },\n        value: (_rowData$delegacionPr = rowData.delegacionPrincipal) === null || _rowData$delegacionPr === void 0 ? void 0 : _rowData$delegacionPr.id,\n        children: _delegaciones.results.map(function (d) {\n          return /*#__PURE__*/_jsx(MenuItem, {\n            value: d.id,\n            children: d.nombre\n          }, d.id);\n        })\n      });\n    }\n  };\n  var columns = Object.keys(USERS.fields).map(function (key) {\n    var _ref3, _dynamicRenders$key;\n\n    return {\n      title: USERS.fields[key],\n      field: key,\n      render: (_ref3 = (_dynamicRenders$key = dynamicRenders[key]) !== null && _dynamicRenders$key !== void 0 ? _dynamicRenders$key : USERS.renders[key]) !== null && _ref3 !== void 0 ? _ref3 : null\n    };\n  });\n  var userActions = [{\n    label: USERS.customActions.sync,\n    onClick: onSync,\n    icon: /*#__PURE__*/_jsx(AutorenewIcon, {})\n  }];\n  return /*#__PURE__*/_jsx(Table, {\n    columns: columns,\n    totalCount: data.count,\n    data: data.results,\n    title: USERS.name,\n    headerActions: userActions,\n    options: {\n      actionsColumnIndex: -1,\n      search: false\n    }\n  });\n}","map":null,"metadata":{},"sourceType":"module"}