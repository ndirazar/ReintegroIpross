{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/reintegros/reintegros-frontend/components/solicitudes/Solicitudes.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport useSWR from 'swr';\nimport { Box } from '@material-ui/core'; //App imports\n\nimport SolicitudesList from './SolicitudesList';\nimport { remove, put, get } from '../api-call/service';\nimport useLoading from '../common/hooks/Loading';\nimport useAlert from '../common/hooks/Alert';\nimport { FormStepper } from './Stepper';\nimport { useForm, FormProvider } from 'react-hook-form';\nimport { ERRORS, PRESTACIONES, SOLICITUDES } from '../../labels';\nimport { objToQueryString, formatDate, getUser, strToDate, isUserCasaCentral, exportTableData } from '../common/helpers';\nimport { addDays, format, parseISO } from 'date-fns';\nimport TableFilters from '../common/TableFilters';\nimport filterConfig from './FiltersConfig'; // import Form from '../builder/Form';\n// import configPrestaciones from './prestaciones/FormConfig';\n\nimport Modal from '../common/Modal';\nimport { FormEditPrestaciones } from './prestaciones/FormEditPrestaciones';\nimport Alert from '../common/Alert';\nexport default function Solicitudes() {\n  _s();\n\n  var _user$delegacionPrinc;\n\n  var user = getUser();\n  var INITIAL_FILTER = {\n    page: 1,\n    size: 20,\n    delegacion: [isUserCasaCentral() ? '' : (user === null || user === void 0 ? void 0 : (_user$delegacionPrinc = user.delegacionPrincipal) === null || _user$delegacionPrinc === void 0 ? void 0 : _user$delegacionPrinc.id) || ''],\n    fecha_alta__gt: '',\n    fecha_alta__lt: ''\n  };\n\n  var _useState = useState(_objectSpread({}, INITIAL_FILTER)),\n      filters = _useState[0],\n      setFilters = _useState[1];\n\n  var _useState2 = useState(objToQueryString(filters)),\n      filterQueryStr = _useState2[0],\n      setFilterQueryStr = _useState2[1];\n\n  var _useSWR = useSWR(\"\".concat(SOLICITUDES.route, \"/?\") + filterQueryStr),\n      data = _useSWR.data,\n      errorGet = _useSWR.error,\n      mutate = _useSWR.mutate;\n\n  var _useState3 = useState(errorGet),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _useState4 = useState(null),\n      info = _useState4[0],\n      setInfo = _useState4[1];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      showStepper = _React$useState2[0],\n      setShowStepper = _React$useState2[1];\n\n  var methods = useForm({\n    mode: 'onBlur'\n  });\n\n  var _useLoading = useLoading(),\n      isLoading = _useLoading.isLoading,\n      unsetLoading = _useLoading.unsetLoading;\n\n  var _useAlert = useAlert(),\n      addAlert = _useAlert.addAlert,\n      removeAlert = _useAlert.removeAlert;\n\n  var _useState5 = useState(false),\n      showFilters = _useState5[0],\n      setShowFilters = _useState5[1];\n\n  var _useState6 = useState(null),\n      editPrestacion = _useState6[0],\n      setEditPrestacion = _useState6[1];\n\n  var _useState7 = useState(false),\n      showEditPrestacion = _useState7[0],\n      setShowEditPrestacion = _useState7[1];\n\n  useEffect(function () {\n    if (!data) {\n      if (errorGet) {\n        unsetLoading();\n        addAlert(ERRORS.onGet(SOLICITUDES.name), 'error');\n      } else {\n        isLoading();\n      }\n    } else {\n      unsetLoading();\n\n      if (!error) {\n        removeAlert();\n      } else {\n        addAlert(error, 'error');\n      }\n    }\n  }, [data, errorGet, error]);\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return remove(\"\".concat(SOLICITUDES.route), id);\n\n            case 3:\n              _context.next = 8;\n              break;\n\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](0);\n              setError(ERRORS.onDeactivate(SOLICITUDES.name));\n\n            case 8:\n              mutate(\"\".concat(SOLICITUDES.route, \"?\") + filterQueryStr);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 5]]);\n    }));\n\n    return function handleDelete(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleShowStepper = function handleShowStepper() {\n    window.scrollTo(0, 0);\n    setShowStepper(true);\n  };\n\n  var handleFinished = function handleFinished() {\n    mutate(\"\".concat(SOLICITUDES.route, \"?\").concat(filterQueryStr));\n  };\n\n  var handleChangePagination = function handleChangePagination(pagination) {\n    setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n      page: pagination.page,\n      size: pagination.pageSize\n    }));\n  };\n\n  var handleFilter = function handleFilter(filters) {\n    if (filters.fecha_alta__gt) {\n      filters.fecha_alta__gt = formatDate(filters.fecha_alta__gt);\n    } else {\n      delete filters.fecha_alta__gt;\n    }\n\n    if (filters.fecha_alta__lt) {\n      filters.fecha_alta__lt = formatDate(addDays(filters.fecha_alta__lt, 1));\n    } else {\n      delete filters.fecha_alta__lt;\n    }\n\n    setFilters(_objectSpread(_objectSpread({}, INITIAL_FILTER), filters));\n    setShowFilters(false);\n  };\n\n  var handleCancelFilter = function handleCancelFilter() {\n    setFilters(_objectSpread({}, INITIAL_FILTER));\n  };\n\n  var handleCloseFilter = function handleCloseFilter() {\n    setShowFilters(false);\n  };\n\n  var handleEditPrestacion = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data) {\n      var _data$nomenclador, _data$nomenclador2, _data$nomenclador2$ca, _data$nomenclador3, _data$nomenclador3$ca, _data$nomenclador4, _data$nomenclador5, _data$nomenclador6, _data$nomenclador6$ca, _data$nomenclador7, _data$nomenclador7$ca, _data$nomenclador8, _data$prestador, _data$prestador2, _data$prestador3, _data$prestador4, _data$nomenclador9, _data$nomenclador10;\n\n      var valorIpross, montoTotal, cobertura, montoReintegrar, prestacion;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!data.auditoria) {\n                _context2.next = 3;\n                break;\n              }\n\n              addAlert(ERRORS.onAlreadyAudited(), 'error');\n              return _context2.abrupt(\"return\", false);\n\n            case 3:\n              valorIpross = (_data$nomenclador = data.nomenclador) === null || _data$nomenclador === void 0 ? void 0 : _data$nomenclador.valorIpross;\n              montoTotal = valorIpross * data.cantidad;\n              cobertura = data.cobertura;\n              montoReintegrar = (montoTotal * parseFloat(cobertura) / 100).toFixed(2);\n              prestacion = _objectSpread(_objectSpread({}, data), {}, {\n                capitulo: {\n                  label: (_data$nomenclador2 = data.nomenclador) === null || _data$nomenclador2 === void 0 ? void 0 : (_data$nomenclador2$ca = _data$nomenclador2.capitulo) === null || _data$nomenclador2$ca === void 0 ? void 0 : _data$nomenclador2$ca.descripcion,\n                  value: (_data$nomenclador3 = data.nomenclador) === null || _data$nomenclador3 === void 0 ? void 0 : (_data$nomenclador3$ca = _data$nomenclador3.capitulo) === null || _data$nomenclador3$ca === void 0 ? void 0 : _data$nomenclador3$ca.capitulo\n                },\n                nomenclador: {\n                  label: \"\".concat((_data$nomenclador4 = data.nomenclador) === null || _data$nomenclador4 === void 0 ? void 0 : _data$nomenclador4.codigo, \"-\").concat((_data$nomenclador5 = data.nomenclador) === null || _data$nomenclador5 === void 0 ? void 0 : _data$nomenclador5.descripcion, \" (\").concat((_data$nomenclador6 = data.nomenclador) === null || _data$nomenclador6 === void 0 ? void 0 : (_data$nomenclador6$ca = _data$nomenclador6.capitulo) === null || _data$nomenclador6$ca === void 0 ? void 0 : _data$nomenclador6$ca.capitulo, \"-\").concat((_data$nomenclador7 = data.nomenclador) === null || _data$nomenclador7 === void 0 ? void 0 : (_data$nomenclador7$ca = _data$nomenclador7.capitulo) === null || _data$nomenclador7$ca === void 0 ? void 0 : _data$nomenclador7$ca.descripcion, \")\"),\n                  value: (_data$nomenclador8 = data.nomenclador) === null || _data$nomenclador8 === void 0 ? void 0 : _data$nomenclador8.id\n                },\n                prestador: {\n                  label: \"\".concat((_data$prestador = data.prestador) === null || _data$prestador === void 0 ? void 0 : _data$prestador.matricula, \" - \").concat((_data$prestador2 = data.prestador) === null || _data$prestador2 === void 0 ? void 0 : _data$prestador2.nombre, \" \").concat((_data$prestador3 = data.prestador) === null || _data$prestador3 === void 0 ? void 0 : _data$prestador3.apellido),\n                  value: (_data$prestador4 = data.prestador) === null || _data$prestador4 === void 0 ? void 0 : _data$prestador4.id\n                },\n                modalidad: (_data$nomenclador9 = data.nomenclador) === null || _data$nomenclador9 === void 0 ? void 0 : _data$nomenclador9.modalidadPrestacion,\n                valorIprossNomenclador: (_data$nomenclador10 = data.nomenclador) === null || _data$nomenclador10 === void 0 ? void 0 : _data$nomenclador10.valorIpross,\n                montoReintegrar: montoReintegrar,\n                montoTotal: montoTotal.toFixed(2),\n                fechaPractica: strToDate(data.fechaPractica).toISOString(),\n                estadoActual: data.estadoActual || 'enCurso',\n                // unidad: data.nomenclador?.unidad,\n                periodo: data.periodo\n              });\n\n              if (data.fechaPractica && data.fechaPracticaHasta) {\n                prestacion.isDateRange = 'range';\n              } else {\n                prestacion.isDateRange = 'date';\n              }\n\n              setEditPrestacion(prestacion);\n              setShowEditPrestacion(true);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleEditPrestacion(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleSubmitPrestacion = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data) {\n      var _data$nomenclador11, _data$nomenclador12, _data$prestador5, _data$prestador6, _data$solicitud;\n\n      var prestacion;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              prestacion = _objectSpread(_objectSpread({}, data), {}, {\n                nomenclador: (_data$nomenclador11 = data.nomenclador) !== null && _data$nomenclador11 !== void 0 && _data$nomenclador11.value ? (_data$nomenclador12 = data.nomenclador) === null || _data$nomenclador12 === void 0 ? void 0 : _data$nomenclador12.value : data.nomenclador,\n                prestador: (_data$prestador5 = data.prestador) !== null && _data$prestador5 !== void 0 && _data$prestador5.value ? (_data$prestador6 = data.prestador) === null || _data$prestador6 === void 0 ? void 0 : _data$prestador6.value : data.prestador,\n                solicitud: (_data$solicitud = data.solicitud) === null || _data$solicitud === void 0 ? void 0 : _data$solicitud.id\n              });\n\n              if (data !== null && data !== void 0 && data.fechaPractica && typeof (data === null || data === void 0 ? void 0 : data.fechaPractica) === 'string') {\n                data.fechaPractica = parseISO(data.fechaPractica);\n              }\n\n              prestacion.fechaPractica = format(data === null || data === void 0 ? void 0 : data.fechaPractica, 'yyyy-MM-dd');\n\n              if (data !== null && data !== void 0 && data.fechaPracticaHasta) {\n                if (typeof (data === null || data === void 0 ? void 0 : data.fechaPracticaHasta) === 'string') {\n                  data.fechaPracticaHasta = parseISO(data.fechaPracticaHasta);\n                }\n\n                prestacion.fechaPracticaHasta = format(data === null || data === void 0 ? void 0 : data.fechaPracticaHasta, 'yyyy-MM-dd');\n              }\n\n              _context3.prev = 4;\n\n              if (!(data !== null && data !== void 0 && data.id)) {\n                _context3.next = 8;\n                break;\n              }\n\n              _context3.next = 8;\n              return put(PRESTACIONES.route, _objectSpread({}, prestacion), data.id);\n\n            case 8:\n              setError(null);\n              setEditPrestacion(null);\n              setInfo(SOLICITUDES.messages.successEditPrestacion);\n              mutate();\n              _context3.next = 17;\n              break;\n\n            case 14:\n              _context3.prev = 14;\n              _context3.t0 = _context3[\"catch\"](4);\n\n              if (data !== null && data !== void 0 && data.id) {\n                setError('onEdit');\n              }\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[4, 14]]);\n    }));\n\n    return function handleSubmitPrestacion(_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    setFilterQueryStr(objToQueryString(filters));\n  }, [filters]);\n\n  var handleExport = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(allColumns, allData) {\n      var _yield$get, _yield$get$data;\n\n      var exportedData;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return get(\"\".concat(SOLICITUDES.route, \"/?\") + objToQueryString(_objectSpread(_objectSpread({}, filters), {}, {\n                size: data.count || 10000\n              })));\n\n            case 2:\n              _context4.t1 = _yield$get = _context4.sent;\n              _context4.t0 = _context4.t1 === null;\n\n              if (_context4.t0) {\n                _context4.next = 6;\n                break;\n              }\n\n              _context4.t0 = _yield$get === void 0;\n\n            case 6:\n              if (!_context4.t0) {\n                _context4.next = 10;\n                break;\n              }\n\n              _context4.t2 = void 0;\n              _context4.next = 11;\n              break;\n\n            case 10:\n              _context4.t2 = (_yield$get$data = _yield$get.data) === null || _yield$get$data === void 0 ? void 0 : _yield$get$data.results;\n\n            case 11:\n              exportedData = _context4.t2;\n              exportTableData('Solicitudes', allColumns, exportedData);\n\n            case 13:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleExport(_x4, _x5) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var closeEditModal = function closeEditModal() {\n    setEditPrestacion(null);\n    setShowEditPrestacion(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    style: {\n      position: 'relative'\n    },\n    children: [showStepper && /*#__PURE__*/_jsxDEV(FormProvider, _objectSpread(_objectSpread({}, methods), {}, {\n      children: /*#__PURE__*/_jsxDEV(FormStepper, {\n        setShowStepper: setShowStepper,\n        onFinished: handleFinished\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this)\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }, this), editPrestacion && /*#__PURE__*/_jsxDEV(Modal, {\n      customClasses: {},\n      open: showEditPrestacion,\n      onClose: closeEditModal,\n      title: SOLICITUDES.modalEditPrestacion.mainTitle,\n      breadcrumbs: '',\n      maxWidth: 'md',\n      children: /*#__PURE__*/_jsxDEV(FormEditPrestaciones, {\n        prestacion: editPrestacion,\n        submit: handleSubmitPrestacion,\n        onCancel: closeEditModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(SolicitudesList, {\n      data: data,\n      handleDelete: handleDelete,\n      onEdit: function onEdit() {},\n      onShowStepper: handleShowStepper,\n      onPaginationChange: handleChangePagination,\n      onFilter: function onFilter() {\n        setShowFilters(true);\n      },\n      onEditPrestacion: function onEditPrestacion(p) {\n        handleEditPrestacion(p);\n      },\n      onExport: handleExport\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableFilters, {\n      config: filterConfig,\n      data: filters,\n      onSubmit: handleFilter,\n      onCancel: handleCancelFilter,\n      onClose: handleCloseFilter,\n      show: showFilters\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Alert, {\n      open: error || info,\n      severity: info ? 'success' : 'error',\n      message: info ? info : error ? ERRORS[error](SOLICITUDES.name) : ERRORS.onGet(SOLICITUDES.name),\n      autoHideAfter: 5500,\n      onClose: function onClose() {\n        setError(null);\n        setInfo(null);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Solicitudes, \"HY/uIWBKH6nAkDbe6DztqfSnatM=\", false, function () {\n  return [useSWR, useForm, useLoading, useAlert];\n});\n\n_c = Solicitudes;\n\nvar _c;\n\n$RefreshReg$(_c, \"Solicitudes\");","map":{"version":3,"sources":["/reintegros/reintegros-frontend/components/solicitudes/Solicitudes.tsx"],"names":["React","useEffect","useState","useSWR","Box","SolicitudesList","remove","put","get","useLoading","useAlert","FormStepper","useForm","FormProvider","ERRORS","PRESTACIONES","SOLICITUDES","objToQueryString","formatDate","getUser","strToDate","isUserCasaCentral","exportTableData","addDays","format","parseISO","TableFilters","filterConfig","Modal","FormEditPrestaciones","Alert","Solicitudes","user","INITIAL_FILTER","page","size","delegacion","delegacionPrincipal","id","fecha_alta__gt","fecha_alta__lt","filters","setFilters","filterQueryStr","setFilterQueryStr","route","data","errorGet","error","mutate","setError","info","setInfo","showStepper","setShowStepper","methods","mode","isLoading","unsetLoading","addAlert","removeAlert","showFilters","setShowFilters","editPrestacion","setEditPrestacion","showEditPrestacion","setShowEditPrestacion","onGet","name","handleDelete","onDeactivate","handleShowStepper","window","scrollTo","handleFinished","handleChangePagination","pagination","pageSize","handleFilter","handleCancelFilter","handleCloseFilter","handleEditPrestacion","auditoria","onAlreadyAudited","valorIpross","nomenclador","montoTotal","cantidad","cobertura","montoReintegrar","parseFloat","toFixed","prestacion","capitulo","label","descripcion","value","codigo","prestador","matricula","nombre","apellido","modalidad","modalidadPrestacion","valorIprossNomenclador","fechaPractica","toISOString","estadoActual","periodo","fechaPracticaHasta","isDateRange","handleSubmitPrestacion","solicitud","messages","successEditPrestacion","handleExport","allColumns","allData","count","results","exportedData","closeEditModal","position","modalEditPrestacion","mainTitle","p"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport useSWR from 'swr';\nimport { Box } from '@material-ui/core';\n//App imports\nimport SolicitudesList from './SolicitudesList';\nimport { remove, put, get } from '../api-call/service';\nimport useLoading from '../common/hooks/Loading';\nimport useAlert from '../common/hooks/Alert';\nimport { FormStepper } from './Stepper';\nimport { useForm, FormProvider } from 'react-hook-form';\nimport { ERRORS, PRESTACIONES, SOLICITUDES } from '../../labels';\nimport {\n  objToQueryString,\n  formatDate,\n  getUser,\n  strToDate,\n  isUserCasaCentral,\n  exportTableData,\n} from '../common/helpers';\nimport { addDays, format, parseISO } from 'date-fns';\nimport TableFilters from '../common/TableFilters';\nimport filterConfig from './FiltersConfig';\n// import Form from '../builder/Form';\n// import configPrestaciones from './prestaciones/FormConfig';\nimport Modal from '../common/Modal';\nimport { FormEditPrestaciones } from './prestaciones/FormEditPrestaciones';\nimport Alert from '../common/Alert';\n\nexport default function Solicitudes() {\n  const user = getUser();\n  const INITIAL_FILTER = {\n    page: 1,\n    size: 20,\n    delegacion: [isUserCasaCentral() ? '' : user?.delegacionPrincipal?.id || ''],\n    fecha_alta__gt: '',\n    fecha_alta__lt: '',\n  };\n  const [filters, setFilters] = useState({ ...INITIAL_FILTER });\n  const [filterQueryStr, setFilterQueryStr] = useState(objToQueryString(filters));\n  const { data, error: errorGet, mutate } = useSWR(`${SOLICITUDES.route}/?` + filterQueryStr);\n  const [error, setError] = useState(errorGet);\n  const [info, setInfo] = useState(null);\n  const [showStepper, setShowStepper] = React.useState(false);\n  const methods = useForm({ mode: 'onBlur' });\n  const { isLoading, unsetLoading } = useLoading();\n  const { addAlert, removeAlert } = useAlert();\n  const [showFilters, setShowFilters] = useState(false);\n  const [editPrestacion, setEditPrestacion] = useState(null);\n  const [showEditPrestacion, setShowEditPrestacion] = useState(false);\n\n  useEffect(() => {\n    if (!data) {\n      if (errorGet) {\n        unsetLoading();\n        addAlert(ERRORS.onGet(SOLICITUDES.name), 'error');\n      } else {\n        isLoading();\n      }\n    } else {\n      unsetLoading();\n      if (!error) {\n        removeAlert();\n      } else {\n        addAlert(error, 'error');\n      }\n    }\n  }, [data, errorGet, error]);\n\n  const handleDelete = async (id: number) => {\n    try {\n      await remove(`${SOLICITUDES.route}`, id);\n    } catch (error) {\n      setError(ERRORS.onDeactivate(SOLICITUDES.name));\n    }\n    mutate(`${SOLICITUDES.route}?` + filterQueryStr);\n  };\n\n  const handleShowStepper = () => {\n    window.scrollTo(0, 0);\n    setShowStepper(true);\n  };\n\n  const handleFinished = () => {\n    mutate(`${SOLICITUDES.route}?${filterQueryStr}`);\n  };\n\n  const handleChangePagination = (pagination: any) => {\n    setFilters({\n      ...filters,\n      page: pagination.page,\n      size: pagination.pageSize,\n    });\n  };\n\n  const handleFilter = (filters: any) => {\n    if (filters.fecha_alta__gt) {\n      filters.fecha_alta__gt = formatDate(filters.fecha_alta__gt);\n    } else {\n      delete filters.fecha_alta__gt;\n    }\n    if (filters.fecha_alta__lt) {\n      filters.fecha_alta__lt = formatDate(addDays(filters.fecha_alta__lt, 1));\n    } else {\n      delete filters.fecha_alta__lt;\n    }\n    setFilters({ ...INITIAL_FILTER, ...filters });\n    setShowFilters(false);\n  };\n\n  const handleCancelFilter = () => {\n    setFilters({ ...INITIAL_FILTER });\n  };\n\n  const handleCloseFilter = () => {\n    setShowFilters(false);\n  };\n\n  const handleEditPrestacion = async (data) => {\n    //TODO\n\n    if (data.auditoria) {\n      addAlert(ERRORS.onAlreadyAudited(), 'error');\n      return false;\n    }\n\n    const valorIpross = data.nomenclador?.valorIpross;\n    const montoTotal = valorIpross * data.cantidad;\n    const cobertura = data.cobertura;\n    const montoReintegrar = ((montoTotal * parseFloat(cobertura)) / 100).toFixed(2);\n\n    const prestacion = {\n      ...data,\n      capitulo: {\n        label: data.nomenclador?.capitulo?.descripcion,\n        value: data.nomenclador?.capitulo?.capitulo,\n      },\n      nomenclador: {\n        label: `${data.nomenclador?.codigo}-${data.nomenclador?.descripcion} (${data.nomenclador?.capitulo?.capitulo}-${data.nomenclador?.capitulo?.descripcion})`,\n        value: data.nomenclador?.id,\n      },\n      prestador: {\n        label: `${data.prestador?.matricula} - ${data.prestador?.nombre} ${data.prestador?.apellido}`,\n        value: data.prestador?.id,\n      },\n      modalidad: data.nomenclador?.modalidadPrestacion,\n      valorIprossNomenclador: data.nomenclador?.valorIpross,\n      montoReintegrar: montoReintegrar,\n      montoTotal: montoTotal.toFixed(2),\n      fechaPractica: strToDate(data.fechaPractica).toISOString(),\n      estadoActual: data.estadoActual || 'enCurso',\n      // unidad: data.nomenclador?.unidad,\n      periodo: data.periodo,\n    };\n\n    if (data.fechaPractica && data.fechaPracticaHasta) {\n      prestacion.isDateRange = 'range';\n    } else {\n      prestacion.isDateRange = 'date';\n    }\n    setEditPrestacion(prestacion);\n    setShowEditPrestacion(true);\n  };\n\n  const handleSubmitPrestacion = async (data) => {\n    const prestacion = {\n      ...data,\n      nomenclador: data.nomenclador?.value ? data.nomenclador?.value : data.nomenclador,\n      prestador: data.prestador?.value ? data.prestador?.value : data.prestador,\n      solicitud: data.solicitud?.id,\n    };\n\n    if (data?.fechaPractica && typeof data?.fechaPractica === 'string') {\n      data.fechaPractica = parseISO(data.fechaPractica);\n    }\n\n    prestacion.fechaPractica = format(data?.fechaPractica, 'yyyy-MM-dd');\n\n    if (data?.fechaPracticaHasta) {\n      if (typeof data?.fechaPracticaHasta === 'string') {\n        data.fechaPracticaHasta = parseISO(data.fechaPracticaHasta);\n      }\n      prestacion.fechaPracticaHasta = format(data?.fechaPracticaHasta, 'yyyy-MM-dd');\n    }\n    try {\n      if (data?.id) {\n        await put(PRESTACIONES.route, { ...prestacion }, data.id);\n      }\n      setError(null);\n      setEditPrestacion(null);\n      setInfo(SOLICITUDES.messages.successEditPrestacion);\n      mutate();\n    } catch (error) {\n      if (data?.id) {\n        setError('onEdit');\n      }\n    }\n  };\n\n  useEffect(() => {\n    setFilterQueryStr(objToQueryString(filters));\n  }, [filters]);\n\n  const handleExport = async (allColumns, allData) => {\n    const exportedData = (\n      await get(\n        `${SOLICITUDES.route}/?` +\n          objToQueryString({\n            ...filters,\n            size: data.count || 10000,\n          }),\n      )\n    )?.data?.results;\n    exportTableData('Solicitudes', allColumns, exportedData);\n  };\n\n  const closeEditModal = () => {\n    setEditPrestacion(null);\n    setShowEditPrestacion(false);\n  };\n\n  return (\n    <Box style={{ position: 'relative' }}>\n      {/* <Button onClick={() => setShowStepper(true)}>{STEPPER_SOLICITUDES.add}</Button> */}\n      {showStepper && (\n        <FormProvider {...methods}>\n          <FormStepper setShowStepper={setShowStepper} onFinished={handleFinished} />\n        </FormProvider>\n      )}\n      {editPrestacion && (\n        <Modal\n          customClasses={{}}\n          open={showEditPrestacion}\n          onClose={closeEditModal}\n          title={SOLICITUDES.modalEditPrestacion.mainTitle}\n          breadcrumbs={''}\n          maxWidth={'md'}\n        >\n          <FormEditPrestaciones\n            prestacion={editPrestacion}\n            submit={handleSubmitPrestacion}\n            onCancel={closeEditModal}\n          />\n        </Modal>\n      )}\n\n      <SolicitudesList\n        data={data}\n        handleDelete={handleDelete}\n        onEdit={() => {}}\n        onShowStepper={handleShowStepper}\n        onPaginationChange={handleChangePagination}\n        onFilter={() => {\n          setShowFilters(true);\n        }}\n        onEditPrestacion={(p) => {\n          handleEditPrestacion(p);\n        }}\n        onExport={handleExport}\n      />\n      <TableFilters\n        config={filterConfig}\n        data={filters}\n        onSubmit={handleFilter}\n        onCancel={handleCancelFilter}\n        onClose={handleCloseFilter}\n        show={showFilters}\n      />\n\n      <Alert\n        open={error || info}\n        severity={info ? 'success' : 'error'}\n        message={\n          info ? info : error ? ERRORS[error](SOLICITUDES.name) : ERRORS.onGet(SOLICITUDES.name)\n        }\n        autoHideAfter={5500}\n        onClose={() => {\n          setError(null);\n          setInfo(null);\n        }}\n      />\n    </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}