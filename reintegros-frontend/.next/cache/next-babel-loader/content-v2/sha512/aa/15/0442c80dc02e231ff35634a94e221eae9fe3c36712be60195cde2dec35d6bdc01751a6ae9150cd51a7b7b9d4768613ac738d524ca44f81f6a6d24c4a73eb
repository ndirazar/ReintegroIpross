{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/reintegros/reintegros-frontend/components/cuentas/terceros/CuentasTerceros.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Box } from '@material-ui/core';\nimport useSWR from 'swr';\nimport SaveIcon from '@material-ui/icons/Save';\nimport ActionBar from '../../common/ActionBar';\nimport { ACTIONS, ERRORS, LOADING, CUENTAS_TERCEROS } from '../../../labels';\nimport CuentasTercerosList from './CuentasTercerosList';\nimport CuentasTercerosForm from './CuentasTercerosForm';\nimport { remove, send } from '../../api-call/service';\nimport Alert from '../../common/Alert';\nimport Loading from '../../common/Loading';\nexport default function CuentasTerceros() {\n  _s();\n\n  var _useSWR = useSWR(\"api/\".concat(CUENTAS_TERCEROS.route, \"/\")),\n      data = _useSWR.data,\n      errotOnGet = _useSWR.error,\n      mutate = _useSWR.mutate;\n\n  var _useState = useState(false),\n      openForm = _useState[0],\n      setOpenForm = _useState[1];\n\n  var _useState2 = useState(null),\n      currentData = _useState2[0],\n      setCurrentData = _useState2[1];\n\n  var _useState3 = useState(null),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var cuentasactions = [{\n    label: ACTIONS.crete(CUENTAS_TERCEROS.name),\n    onClick: function onClick() {\n      setCurrentData({});\n      setOpenForm(!openForm);\n    },\n    icon: /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 13\n    }, this)\n  }];\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var formData, x;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              formData = new FormData();\n              formData.append('apellido', data.apellido);\n              formData.append('nombre', data.nombre);\n              formData.append('cbu', data.cbu);\n              formData.append('cuitCuil', data.cuitCuil);\n              formData.append('delegacion', data.delegacion);\n              formData.append('responsableDeCarga', data.responsableDeCarga);\n\n              if (data.adjuntos.length > 1) {\n                for (x = 0; x < data.adjuntos.length; x++) {\n                  formData.append('adjuntos', data.adjuntos[x]);\n                }\n              } else {\n                formData.append('adjuntos', data.adjuntos);\n              }\n\n              _context.prev = 8;\n\n              if (!(currentData !== null && currentData !== void 0 && currentData.id)) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 12;\n              return send({\n                url: \"api/\".concat(CUENTAS_TERCEROS.route, \"/\").concat(currentData === null || currentData === void 0 ? void 0 : currentData.id),\n                data: formData,\n                method: 'PUT',\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                }\n              });\n\n            case 12:\n              _context.next = 16;\n              break;\n\n            case 14:\n              _context.next = 16;\n              return send({\n                url: \"api/\".concat(CUENTAS_TERCEROS.route, \"/\"),\n                data: formData,\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                }\n              });\n\n            case 16:\n              setError(null);\n              handleCancel();\n              mutate();\n              _context.next = 25;\n              break;\n\n            case 21:\n              _context.prev = 21;\n              _context.t0 = _context[\"catch\"](8);\n              console.log(_context.t0);\n\n              if (currentData !== null && currentData !== void 0 && currentData.id) {\n                setError('onEdit');\n              } else {\n                setError('onCreate');\n              }\n\n            case 25:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[8, 21]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleCancel = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setCurrentData(null);\n              setOpenForm(false);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleCancel() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log('handleDelete', id);\n              _context3.prev = 1;\n              _context3.next = 4;\n              return remove(\"api/\".concat(CUENTAS_TERCEROS.route), id);\n\n            case 4:\n              setError(null);\n              _context3.next = 10;\n              break;\n\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](1);\n              setError('onDelete');\n\n            case 10:\n              mutate();\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 7]]);\n    }));\n\n    return function handleDelete(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onEdit = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setCurrentData(data);\n              setOpenForm(true);\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function onEdit(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ActionBar, {\n      actions: cuentasactions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      p: 2,\n      m: 1,\n      children: [openForm && /*#__PURE__*/_jsxDEV(CuentasTercerosForm, {\n        data: currentData,\n        handleSubmit: handleSubmit,\n        handleCancel: handleCancel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), data && /*#__PURE__*/_jsxDEV(CuentasTercerosList, {\n        data: data,\n        handleDelete: handleDelete,\n        onEdit: onEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Loading, {\n      loading: !data,\n      message: LOADING(CUENTAS_TERCEROS.name)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Alert, {\n      open: errotOnGet || error,\n      severity: \"error\",\n      message: error ? ERRORS[error](CUENTAS_TERCEROS.name) : ERRORS.onGet(CUENTAS_TERCEROS.name)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(CuentasTerceros, \"SP01PFdYiy7JSGTLmmheCQkZkpU=\", false, function () {\n  return [useSWR];\n});\n\n_c = CuentasTerceros;\n\nvar _c;\n\n$RefreshReg$(_c, \"CuentasTerceros\");","map":{"version":3,"sources":["/reintegros/reintegros-frontend/components/cuentas/terceros/CuentasTerceros.tsx"],"names":["React","useState","Box","useSWR","SaveIcon","ActionBar","ACTIONS","ERRORS","LOADING","CUENTAS_TERCEROS","CuentasTercerosList","CuentasTercerosForm","remove","send","Alert","Loading","CuentasTerceros","route","data","errotOnGet","error","mutate","openForm","setOpenForm","currentData","setCurrentData","setError","cuentasactions","label","crete","name","onClick","icon","handleSubmit","formData","FormData","append","apellido","nombre","cbu","cuitCuil","delegacion","responsableDeCarga","adjuntos","length","x","id","url","method","headers","handleCancel","console","log","handleDelete","onEdit","onGet"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Box } from '@material-ui/core';\nimport useSWR from 'swr';\nimport SaveIcon from '@material-ui/icons/Save';\nimport ActionBar from '../../common/ActionBar';\nimport { Action } from '../../common/types/Action';\nimport { ACTIONS, ERRORS, LOADING, CUENTAS_TERCEROS } from '../../../labels';\nimport CuentasTercerosList from './CuentasTercerosList';\nimport CuentasTercerosForm from './CuentasTercerosForm';\nimport { post, put, remove, send } from '../../api-call/service';\nimport Alert from '../../common/Alert';\nimport Loading from '../../common/Loading';\n\nexport default function CuentasTerceros() {\n  const { data, error: errotOnGet, mutate } = useSWR(`api/${CUENTAS_TERCEROS.route}/`);\n  const [openForm, setOpenForm] = useState(false);\n  const [currentData, setCurrentData] = useState(null);\n  const [error, setError] = useState(null);\n\n  const cuentasactions: Action[] = [\n    {\n      label: ACTIONS.crete(CUENTAS_TERCEROS.name),\n      onClick: () => {\n        setCurrentData({});\n        setOpenForm(!openForm);\n      },\n      icon: <SaveIcon />,\n    },\n  ];\n\n  const handleSubmit = async (data) => {\n    const formData = new FormData();\n    formData.append('apellido', data.apellido);\n    formData.append('nombre', data.nombre);\n    formData.append('cbu', data.cbu);\n    formData.append('cuitCuil', data.cuitCuil);\n    formData.append('delegacion', data.delegacion);\n    formData.append('responsableDeCarga', data.responsableDeCarga);\n\n    if (data.adjuntos.length > 1) {\n      for (var x = 0; x < data.adjuntos.length; x++) {\n        formData.append('adjuntos', data.adjuntos[x]);\n      }\n    } else {\n      formData.append('adjuntos', data.adjuntos);\n    }\n\n    try {\n      if (currentData?.id) {\n        // await put(`api/${CUENTAS_TERCEROS.route}`, formData, currentData?.id);\n        await send({\n          url: `api/${CUENTAS_TERCEROS.route}/${currentData?.id}`,\n          data: formData,\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        });\n      } else {\n        await send({\n          url: `api/${CUENTAS_TERCEROS.route}/`,\n          data: formData,\n          method: 'POST',\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        });\n        // await post(`api/${CUENTAS_TERCEROS.route}`, formData);\n      }\n      setError(null);\n      handleCancel();\n      mutate();\n    } catch (error) {\n      console.log(error);\n      if (currentData?.id) {\n        setError('onEdit');\n      } else {\n        setError('onCreate');\n      }\n    }\n  };\n\n  const handleCancel = async () => {\n    setCurrentData(null);\n    setOpenForm(false);\n  };\n\n  const handleDelete = async (id: number) => {\n    console.log('handleDelete', id);\n    try {\n      await remove(`api/${CUENTAS_TERCEROS.route}`, id);\n      setError(null);\n    } catch (error) {\n      setError('onDelete');\n    }\n    mutate();\n  };\n\n  const onEdit = async (data) => {\n    setCurrentData(data);\n    setOpenForm(true);\n  };\n  return (\n    <>\n      <ActionBar actions={cuentasactions} />\n\n      <Box p={2} m={1}>\n        {openForm && (\n          <CuentasTercerosForm\n            data={currentData}\n            handleSubmit={handleSubmit}\n            handleCancel={handleCancel}\n          />\n        )}\n        {data && <CuentasTercerosList data={data} handleDelete={handleDelete} onEdit={onEdit} />}\n      </Box>\n\n      <Loading loading={!data} message={LOADING(CUENTAS_TERCEROS.name)} />\n      <Alert\n        open={errotOnGet || error}\n        severity=\"error\"\n        message={error ? ERRORS[error](CUENTAS_TERCEROS.name) : ERRORS.onGet(CUENTAS_TERCEROS.name)}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}