{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/reintegros/reintegros-frontend/components/auditorias/Auditorias.tsx\";\nimport { Box, Typography } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport useSWR from 'swr';\nimport AuditoriasForm from './AuditoriasForm';\nimport AuditoriasList from './AuditoriasList';\nimport { post, remove } from '../api-call/service';\nimport Loading from '../common/Loading';\nimport { ERRORS, LOADING, AUDITORIAS, PRESTACIONES } from '../../labels';\nimport Alert from '../common/Alert';\nimport Modal from '../common/Modal';\nexport default function Auditorias() {\n  const {\n    data,\n    error: errotOnGet,\n    mutate\n  } = useSWR(PRESTACIONES.route);\n  const {\n    0: openForm,\n    1: setOpenForm\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const {\n    0: currentData,\n    1: setCurrentData\n  } = useState(null);\n\n  const handleSubmit = async data => {\n    try {\n      await post(AUDITORIAS.route, {\n        prestacion: currentData === null || currentData === void 0 ? void 0 : currentData.id,\n        auditorAsignado: 2,\n        actualizadoPor: 2,\n        motivoDeRechazo: data.motivoDeRechazo,\n        porcentajeDeCobertura: parseInt(data.cobertura),\n        montoAReintegrar: parseFloat(data.montoReintegrar)\n      });\n    } catch (error) {\n      //TODO handle error\n      console.log(error);\n    }\n\n    setCurrentData(null);\n    setOpenForm(false);\n    mutate();\n  };\n\n  const handleCancel = async () => {\n    setCurrentData(null);\n    setOpenForm(false);\n  };\n\n  const handleDelete = async id => {\n    try {\n      await remove(AUDITORIAS.route, id);\n      setError(null);\n    } catch (error) {\n      setError('onDelete');\n    }\n\n    mutate();\n  };\n\n  const onAudit = async data => {\n    setOpenForm(false);\n    setCurrentData(data);\n    setOpenForm(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      p: 2,\n      m: 1,\n      children: [openForm && /*#__PURE__*/_jsxDEV(Modal, {\n        customClasses: {},\n        open: true,\n        onClose: () => setOpenForm(false),\n        title: 'Auditar prestación',\n        breadcrumbs: '',\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            gutterBottom: true,\n            children: \"Verifica la documentaci\\xF3n requerida y cobertura definida\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            gutterBottom: true,\n            children: \"Factura\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            gutterBottom: true,\n            children: \"Historia clinica\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(AuditoriasForm, {\n          data: currentData,\n          handleSubmit: handleSubmit,\n          handleCancel: handleCancel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), data && /*#__PURE__*/_jsxDEV(AuditoriasList, {\n        data: data,\n        handleDelete: handleDelete,\n        onAudit: onAudit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Loading, {\n      loading: !data,\n      message: LOADING(AUDITORIAS.name)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Alert, {\n      open: errotOnGet || error,\n      severity: \"error\",\n      message: error ? ERRORS[error](AUDITORIAS.name) : ERRORS.onGet(AUDITORIAS.name)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}","map":{"version":3,"sources":["/reintegros/reintegros-frontend/components/auditorias/Auditorias.tsx"],"names":["Box","Typography","React","useState","useSWR","AuditoriasForm","AuditoriasList","post","remove","Loading","ERRORS","LOADING","AUDITORIAS","PRESTACIONES","Alert","Modal","Auditorias","data","error","errotOnGet","mutate","route","openForm","setOpenForm","setError","currentData","setCurrentData","handleSubmit","prestacion","id","auditorAsignado","actualizadoPor","motivoDeRechazo","porcentajeDeCobertura","parseInt","cobertura","montoAReintegrar","parseFloat","montoReintegrar","console","log","handleCancel","handleDelete","onAudit","name","onGet"],"mappings":"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","sourcesContent":["import { Box, Typography } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport useSWR from 'swr';\nimport AuditoriasForm from './AuditoriasForm';\nimport AuditoriasList from './AuditoriasList';\nimport { post, put, remove } from '../api-call/service';\nimport Loading from '../common/Loading';\nimport { ACTIONS, ERRORS, LOADING, AUDITORIAS, PRESTACIONES } from '../../labels';\nimport Alert from '../common/Alert';\nimport { Action } from '../common/types/Action';\nimport ActionBar from '../common/ActionBar';\nimport SaveIcon from '@material-ui/icons/Save';\nimport Modal from '../common/Modal';\n\nexport default function Auditorias() {\n  const { data, error: errotOnGet, mutate } = useSWR(PRESTACIONES.route);\n\n  const [openForm, setOpenForm] = useState(false);\n  const [error, setError] = useState(null);\n  const [currentData, setCurrentData] = useState(null);\n\n  const handleSubmit = async (data) => {\n    try {\n      await post(AUDITORIAS.route, {\n        prestacion: currentData?.id,\n        auditorAsignado: 2,\n        actualizadoPor: 2,\n        motivoDeRechazo: data.motivoDeRechazo,\n        porcentajeDeCobertura: parseInt(data.cobertura),\n        montoAReintegrar: parseFloat(data.montoReintegrar),\n      });\n    } catch (error) {\n      //TODO handle error\n      console.log(error);\n    }\n    setCurrentData(null);\n    setOpenForm(false);\n    mutate();\n  };\n\n  const handleCancel = async () => {\n    setCurrentData(null);\n    setOpenForm(false);\n  };\n\n  const handleDelete = async (id: number) => {\n    try {\n      await remove(AUDITORIAS.route, id);\n      setError(null);\n    } catch (error) {\n      setError('onDelete');\n    }\n    mutate();\n  };\n\n  const onAudit = async (data) => {\n    setOpenForm(false);\n    setCurrentData(data);\n    setOpenForm(true);\n  };\n  return (\n    <>\n      <Box p={2} m={1}>\n        {openForm && (\n          <Modal\n            customClasses={{}}\n            open={true}\n            onClose={() => setOpenForm(false)}\n            title={'Auditar prestación'}\n            breadcrumbs={''}\n          >\n            <Box>\n              <Typography variant=\"subtitle1\" gutterBottom>\n                Verifica la documentación requerida y cobertura definida\n              </Typography>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Factura\n              </Typography>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Historia clinica\n              </Typography>\n            </Box>\n            <AuditoriasForm\n              data={currentData}\n              handleSubmit={handleSubmit}\n              handleCancel={handleCancel}\n            />\n          </Modal>\n        )}\n        {data && <AuditoriasList data={data} handleDelete={handleDelete} onAudit={onAudit} />}\n      </Box>\n\n      <Loading loading={!data} message={LOADING(AUDITORIAS.name)} />\n      <Alert\n        open={errotOnGet || error}\n        severity=\"error\"\n        message={error ? ERRORS[error](AUDITORIAS.name) : ERRORS.onGet(AUDITORIAS.name)}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}