{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/reintegros/reintegros-frontend/components/nomenclador/Nomenclador.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Box } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport useSWR from 'swr';\nimport NomencladorForm from './NomencladorForm';\nimport NomencladorList from './NomencladorList';\nimport { post, put, remove } from '../api-call/service';\nimport { format } from 'date-fns';\nimport Loading from '../common/Loading';\nimport { ACTIONS, ERRORS, LOADING, NOMENCLADOR } from '../../labels';\nimport Alert from '../common/Alert';\nimport ActionBar from '../common/ActionBar';\nimport SaveIcon from '@material-ui/icons/Save';\nexport default function Nomenclador() {\n  _s();\n\n  var _useSWR = useSWR(\"api/\".concat(NOMENCLADOR.route, \"/\")),\n      data = _useSWR.data,\n      errotOnGet = _useSWR.error,\n      mutate = _useSWR.mutate;\n\n  var _useState = useState(false),\n      openForm = _useState[0],\n      setOpenForm = _useState[1];\n\n  var _useState2 = useState(null),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(null),\n      currentData = _useState3[0],\n      setCurrentData = _useState3[1];\n\n  var nomencladorActions = [{\n    label: ACTIONS.crete(NOMENCLADOR.name),\n    onClick: function onClick() {\n      return setOpenForm(!openForm);\n    },\n    icon: /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 13\n    }, this)\n  }];\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              data.fechaNorma = format(data.fechaNorma, 'yyyy-MM-dd');\n\n              if (!(currentData !== null && currentData !== void 0 && currentData.id)) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 5;\n              return put(\"\".concat(NOMENCLADOR.route, \"/\"), _objectSpread({}, data), currentData === null || currentData === void 0 ? void 0 : currentData.id);\n\n            case 5:\n              _context.next = 10;\n              break;\n\n            case 7:\n              console.log(data);\n              _context.next = 10;\n              return post(\"\".concat(NOMENCLADOR.route), _objectSpread({}, data));\n\n            case 10:\n              setError(null);\n              _context.next = 17;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n              if (currentData !== null && currentData !== void 0 && currentData.id) {\n                setError('onEdit');\n              } else {\n                setError('onCreate');\n              }\n\n            case 17:\n              handleCancel();\n              mutate();\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 13]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleCancel = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setCurrentData(null);\n              setOpenForm(false);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleCancel() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return remove(\"\".concat(NOMENCLADOR.route), id);\n\n            case 3:\n              setError(null);\n              _context3.next = 9;\n              break;\n\n            case 6:\n              _context3.prev = 6;\n              _context3.t0 = _context3[\"catch\"](0);\n              setError('onDelete');\n\n            case 9:\n              mutate();\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 6]]);\n    }));\n\n    return function handleDelete(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onEdit = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setCurrentData(data);\n              setOpenForm(true);\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function onEdit(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ActionBar, {\n      actions: nomencladorActions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      p: 2,\n      m: 1,\n      children: [openForm && /*#__PURE__*/_jsxDEV(NomencladorForm, {\n        data: currentData,\n        handleSubmit: handleSubmit,\n        handleCancel: handleCancel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), data && /*#__PURE__*/_jsxDEV(NomencladorList, {\n        data: data,\n        handleDelete: handleDelete,\n        onEdit: onEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Loading, {\n      loading: !data,\n      message: LOADING(NOMENCLADOR.name)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Alert, {\n      open: errotOnGet || error,\n      severity: \"error\",\n      message: error ? ERRORS[error](NOMENCLADOR.name) : ERRORS.onGet(NOMENCLADOR.name)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Nomenclador, \"VM/s4UrGLzbKJRli1mjkFGoXCZ0=\", false, function () {\n  return [useSWR];\n});\n\n_c = Nomenclador;\n\nvar _c;\n\n$RefreshReg$(_c, \"Nomenclador\");","map":{"version":3,"sources":["/reintegros/reintegros-frontend/components/nomenclador/Nomenclador.tsx"],"names":["Box","React","useState","useSWR","NomencladorForm","NomencladorList","post","put","remove","format","Loading","ACTIONS","ERRORS","LOADING","NOMENCLADOR","Alert","ActionBar","SaveIcon","Nomenclador","route","data","errotOnGet","error","mutate","openForm","setOpenForm","setError","currentData","setCurrentData","nomencladorActions","label","crete","name","onClick","icon","handleSubmit","fechaNorma","id","console","log","handleCancel","handleDelete","onEdit","onGet"],"mappings":"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","sourcesContent":["import { Box } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport useSWR from 'swr';\nimport NomencladorForm from './NomencladorForm';\nimport NomencladorList from './NomencladorList';\nimport { post, put, remove } from '../api-call/service';\nimport { format, parseISO } from 'date-fns';\nimport Loading from '../common/Loading';\nimport { ACTIONS, ERRORS, LOADING, NOMENCLADOR } from '../../labels';\nimport Alert from '../common/Alert';\nimport { Action } from '../common/types/Action';\nimport ActionBar from '../common/ActionBar';\nimport SaveIcon from '@material-ui/icons/Save';\n\nexport default function Nomenclador() {\n  const { data, error: errotOnGet, mutate } = useSWR(`api/${NOMENCLADOR.route}/`);\n\n  const [openForm, setOpenForm] = useState(false);\n  const [error, setError] = useState(null);\n  const [currentData, setCurrentData] = useState(null);\n\n  const nomencladorActions: Action[] = [\n    {\n      label: ACTIONS.crete(NOMENCLADOR.name),\n      onClick: () => setOpenForm(!openForm),\n      icon: <SaveIcon />,\n    },\n  ];\n  const handleSubmit = async (data) => {\n    try {\n      data.fechaNorma = format(data.fechaNorma, 'yyyy-MM-dd');\n      if (currentData?.id) {\n        await put(`${NOMENCLADOR.route}/`, { ...data }, currentData?.id);\n      } else {\n        console.log(data);\n        await post(`${NOMENCLADOR.route}`, { ...data });\n      }\n      setError(null);\n    } catch (error) {\n      console.log(error);\n      if (currentData?.id) {\n        setError('onEdit');\n      } else {\n        setError('onCreate');\n      }\n    }\n    handleCancel();\n    mutate();\n  };\n\n  const handleCancel = async () => {\n    setCurrentData(null);\n    setOpenForm(false);\n  };\n\n  const handleDelete = async (id: number) => {\n    try {\n      await remove(`${NOMENCLADOR.route}`, id);\n      setError(null);\n    } catch (error) {\n      setError('onDelete');\n    }\n    mutate();\n  };\n\n  const onEdit = async (data) => {\n    setCurrentData(data);\n    setOpenForm(true);\n  };\n  return (\n    <>\n      <ActionBar actions={nomencladorActions} />\n\n      <Box p={2} m={1}>\n        {openForm && (\n          <NomencladorForm\n            data={currentData}\n            handleSubmit={handleSubmit}\n            handleCancel={handleCancel}\n          />\n        )}\n        {data && <NomencladorList data={data} handleDelete={handleDelete} onEdit={onEdit} />}\n      </Box>\n\n      <Loading loading={!data} message={LOADING(NOMENCLADOR.name)} />\n      <Alert\n        open={errotOnGet || error}\n        severity=\"error\"\n        message={error ? ERRORS[error](NOMENCLADOR.name) : ERRORS.onGet(NOMENCLADOR.name)}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}