{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/reintegros/reintegros-frontend/components/builder/FieldRender.tsx\";\nimport { TextField, Checkbox, RadioGroup, FormControl, FormControlLabel, Radio, FormHelperText, FormLabel, InputLabel, Select, MenuItem, InputAdornment, Box } from '@material-ui/core';\nimport { KeyboardDatePicker, KeyboardTimePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport esLocale from 'date-fns/locale/es';\nimport React from 'react';\nimport { Controller } from 'react-hook-form';\nimport { FieldType } from './FormField';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { format, parseISO } from 'date-fns';\nimport { FORM_BUILDER } from '../../labels';\nimport FieldAutocomplete from './FieldAutocomplete';\nimport FileInput from '../common/FileInput'; // Needed for prevent passing 'value' and 'onChange' props\n\nconst DatePicker = KeyboardDatePicker;\nconst TimePicker = KeyboardTimePicker;\nexport const getError = (field, errors) => {\n  var _field$rules, _field$rules2, _field$rules3, _field$rules4;\n\n  if (errors && errors[field.name]) {\n    switch (errors[field.name].type) {\n      case 'required':\n        return FORM_BUILDER.required;\n\n      case 'min':\n        return `${FORM_BUILDER.min} ${(_field$rules = field.rules) === null || _field$rules === void 0 ? void 0 : _field$rules.min}`;\n\n      case 'minLength':\n        return `${FORM_BUILDER.minLength} ${(_field$rules2 = field.rules) === null || _field$rules2 === void 0 ? void 0 : _field$rules2.minLength}`;\n\n      case 'max':\n        return `${FORM_BUILDER.max} ${(_field$rules3 = field.rules) === null || _field$rules3 === void 0 ? void 0 : _field$rules3.max}`;\n\n      case 'maxLength':\n        return `${FORM_BUILDER.maxLength} ${(_field$rules4 = field.rules) === null || _field$rules4 === void 0 ? void 0 : _field$rules4.maxLength}`;\n\n      case 'pattern':\n        return errors[field.name].message || FORM_BUILDER.pattern;\n\n      case 'validate':\n        return errors[field.name].message;\n\n      case 'unique':\n        return `${FORM_BUILDER.unique}`;\n\n      default:\n        return errors[field.name].message || FORM_BUILDER.default;\n      // return FORM_BUILDER.default;\n    }\n  } else {\n    return null;\n  }\n};\nexport const getRules = (field, form) => {\n  const rules = field.rules || {};\n\n  if (rules.validate) {\n    const oldMethod = rules.validate;\n\n    rules.validate = () => oldMethod(form);\n  }\n\n  return rules;\n};\nexport default function FieldRender({\n  field,\n  form,\n  data\n}) {\n  var _field$rules5, _ref, _ref2, _field$rules10, _ref4, _ref5;\n\n  const {\n    control,\n    errors\n  } = form;\n  const variant = 'standard';\n  const error = getError(field, errors);\n  const rules = getRules(field, form);\n\n  if (field.component === 'email') {\n    rules.pattern = /^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n  } // Prefix & Suffix\n\n\n  const inputProps = {};\n\n  if (field.prefix) {\n    inputProps.startAdornment = /*#__PURE__*/_jsxDEV(InputAdornment, {\n      position: \"start\",\n      children: field.prefix\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 33\n    }, this);\n  }\n\n  if (field.suffix) {\n    inputProps.endAdornment = /*#__PURE__*/_jsxDEV(InputAdornment, {\n      position: \"end\",\n      children: field.suffix\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 31\n    }, this);\n  }\n\n  const getMaxDate = f => {\n    var _f$rules;\n\n    return (f === null || f === void 0 ? void 0 : (_f$rules = f.rules) === null || _f$rules === void 0 ? void 0 : _f$rules.max) || new Date(2100, 10, 1);\n  };\n\n  const getMinDate = f => {\n    var _f$rules2;\n\n    return (f === null || f === void 0 ? void 0 : (_f$rules2 = f.rules) === null || _f$rules2 === void 0 ? void 0 : _f$rules2.min) || new Date(1900, 10, 1);\n  };\n\n  switch (field.type) {\n    case FieldType.date:\n      return /*#__PURE__*/_jsxDEV(MuiPickersUtilsProvider, {\n        utils: DateFnsUtils,\n        locale: esLocale,\n        children: /*#__PURE__*/_jsxDEV(Controller, {\n          variant: variant,\n          name: field.name,\n          label: field.label + (((_field$rules5 = field.rules) === null || _field$rules5 === void 0 ? void 0 : _field$rules5.required) === true ? ' *' : ''),\n          control: control,\n          error: !!error,\n          rules: rules,\n          initialFocusedDate: null,\n          defaultValue: (_ref = data[field.name] && format(parseISO(data[field.name]), 'MM/dd/yyyy')) !== null && _ref !== void 0 ? _ref : '',\n          render: props => /*#__PURE__*/_jsxDEV(DatePicker, {\n            value: props.value || null,\n            onChange: e => {\n              props.onChange(e);\n              field.onChange && field.onChange(e, form);\n            },\n            inputRef: props.ref,\n            maxDate: getMaxDate(field),\n            minDate: getMinDate(field) // maxDate={field?.rules?.max || new Date(2100, 10, 1)}\n            // minDate={field?.rules?.max || new Date(1900, 10, 1)}\n            ,\n            autoOk: true,\n            disableToolbar: true,\n            variant: variant,\n            format: \"dd/MM/yyyy\",\n            inputVariant: variant,\n            fullWidth: true,\n            label: field.label,\n            helperText: error,\n            error: error,\n            disabled: field.disabled,\n            KeyboardButtonProps: {\n              'aria-label': 'change date'\n            },\n            InputLabelProps: {\n              shrink: props.value ? true : undefined\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this);\n      break;\n\n    case FieldType.time:\n      return /*#__PURE__*/_jsxDEV(MuiPickersUtilsProvider, {\n        utils: DateFnsUtils,\n        locale: esLocale,\n        children: /*#__PURE__*/_jsxDEV(Controller, {\n          variant: variant,\n          error: !!error,\n          rules: rules,\n          render: props => {\n            var _field$rules6;\n\n            return /*#__PURE__*/_jsxDEV(TimePicker, {\n              value: props.value,\n              onChange: props.onChange,\n              inputRef: props.ref,\n              autoOk: true,\n              variant: \"inline\",\n              disableToolbar: true,\n              inputVariant: variant,\n              fullWidth: true,\n              label: field.label + (((_field$rules6 = field.rules) === null || _field$rules6 === void 0 ? void 0 : _field$rules6.required) === true ? ' *' : ''),\n              error: !!error,\n              helperText: error,\n              disabled: field.disabled,\n              format: \"HH:mm\",\n              KeyboardButtonProps: {\n                'aria-label': 'change time'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this);\n          },\n          name: field.name,\n          placeholder: field.placeholder,\n          control: control\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this);\n      break;\n\n    case FieldType.int:\n      return /*#__PURE__*/_jsxDEV(Controller, {\n        render: props => {\n          var _field$rules7;\n\n          return /*#__PURE__*/_jsxDEV(TextField, {\n            label: field.label + (((_field$rules7 = field.rules) === null || _field$rules7 === void 0 ? void 0 : _field$rules7.required) === true ? ' *' : ''),\n            value: props.value,\n            name: field.name,\n            variant: variant,\n            fullWidth: true,\n            type: \"number\",\n            helperText: error,\n            error: !!error,\n            inputRef: props.ref,\n            onChange: event => {\n              form.setValue(field.name, parseFloat(event.target.value));\n              field.onChange && field.onChange(parseFloat(event.target.value), form);\n            },\n            onBlur: event => {\n              field.onBlur && field.onBlur(event.target.value, form);\n            },\n            InputProps: inputProps,\n            disabled: field.disabled\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this);\n        },\n        defaultValue: data[field.name],\n        type: \"number\",\n        name: field.name,\n        label: field.label,\n        control: control,\n        error: !!error,\n        rules: rules\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this);\n\n    case FieldType.float:\n      return /*#__PURE__*/_jsxDEV(Controller, {\n        render: props => {\n          var _field$rules8;\n\n          return /*#__PURE__*/_jsxDEV(TextField, {\n            label: field.label + (((_field$rules8 = field.rules) === null || _field$rules8 === void 0 ? void 0 : _field$rules8.required) === true ? ' *' : ''),\n            value: props.value,\n            name: field.name,\n            type: \"number\",\n            variant: variant,\n            error: !!error,\n            fullWidth: true,\n            helperText: error || field.help,\n            inputRef: props.ref,\n            onChange: ({\n              target: {\n                value\n              }\n            }) => {\n              let newVal = 0;\n              const regex = /^\\d+(\\.\\d{0,2})?$/;\n\n              if (regex.test(value)) {\n                newVal = Number(value);\n              } else {\n                newVal = Number(props.value);\n              }\n\n              form.setValue(field.name, newVal);\n              props.onChange && props.onChange(newVal);\n            },\n            onFocus: ({\n              target: {\n                value\n              }\n            }) => {\n              if (value === '0') {\n                form.setValue(field.name, '');\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this);\n        },\n        defaultValue: (_ref2 = data && data[field.name]) !== null && _ref2 !== void 0 ? _ref2 : 0,\n        name: field.name,\n        label: field.label,\n        control: control,\n        error: !!error,\n        rules: rules\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this);\n      break;\n\n    case FieldType.options:\n      if (!Array.isArray(field.options)) {\n        return /*#__PURE__*/_jsxDEV(FieldAutocomplete, {\n          field: field,\n          error: error,\n          rules: rules,\n          form: form\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 16\n        }, this);\n      } else {\n        var _field$rules9, _ref3;\n\n        return /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: variant,\n          fullWidth: true,\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: field.label + (((_field$rules9 = field.rules) === null || _field$rules9 === void 0 ? void 0 : _field$rules9.required) === true ? ' *' : '')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Controller, {\n            control: control,\n            name: field.name,\n            id: field.name,\n            error: !!error,\n            disabled: field.disabled,\n            rules: rules,\n            defaultValue: (_ref3 = data && data[field.name]) !== null && _ref3 !== void 0 ? _ref3 : '',\n            render: props => /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(Select, {\n                label: field.label,\n                value: props.value,\n                error: error,\n                onChange: e => {\n                  var _e$target$value, _e$target, _e$target2;\n\n                  props.onChange((_e$target$value = e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.value) !== null && _e$target$value !== void 0 ? _e$target$value : null);\n                  field.onChange && field.onChange(e === null || e === void 0 ? void 0 : (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.value, form);\n                },\n                disabled: field.disabled,\n                multiple: field.multiple,\n                children: field.options.map((elem, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: elem.value,\n                  children: elem.label\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 19\n              }, this)\n            }, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(FormHelperText, {\n            className: 'Mui-error',\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this);\n      }\n\n      break;\n\n    case FieldType.boolean:\n      return /*#__PURE__*/_jsxDEV(FormControlLabel, {\n        control: /*#__PURE__*/_jsxDEV(Controller, {\n          error: !!error,\n          rules: rules,\n          helperText: error,\n          variant: variant,\n          fullWidth: true,\n          label: field.label + (((_field$rules10 = field.rules) === null || _field$rules10 === void 0 ? void 0 : _field$rules10.required) === true ? ' *' : ''),\n          render: props => /*#__PURE__*/_jsxDEV(Checkbox, {\n            onChange: event => {\n              form.setValue(field.name, event.target.checked);\n              field.onChange && field.onChange(event.target.checked, form);\n            },\n            checked: props.value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 17\n          }, this),\n          valueName: \"checked\",\n          name: field.name,\n          control: control,\n          color: \"primary\",\n          disabled: field.disabled,\n          defaultValue: data[field.name] || false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this),\n        label: field.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this);\n      break;\n\n    case FieldType.radio:\n      return /*#__PURE__*/_jsxDEV(FormControlLabel, {\n        label: '',\n        control: /*#__PURE__*/_jsxDEV(Controller, {\n          error: !!error,\n          rules: rules,\n          helperText: error,\n          variant: variant,\n          fullWidth: true,\n          label: field.label,\n          render: props => {\n            var _field$options;\n\n            return /*#__PURE__*/_jsxDEV(Box, {\n              children: [/*#__PURE__*/_jsxDEV(RadioGroup, {\n                name: field.name,\n                onChange: event => {\n                  form.setValue(field.name, event.target.value);\n                  field.onChange && field.onChange(event.target.value, form);\n                },\n                value: props.value,\n                children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                  component: \"legend\",\n                  children: field.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 21\n                }, this), (_field$options = field.options) === null || _field$options === void 0 ? void 0 : _field$options.map((opt, i) => {\n                  return /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: opt.value,\n                    control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 366,\n                      columnNumber: 36\n                    }, this),\n                    label: opt.label\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 25\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                style: {\n                  color: 'red'\n                },\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 17\n            }, this);\n          },\n          valueName: \"checked\",\n          name: field.name,\n          control: control,\n          color: \"primary\",\n          disabled: field.disabled,\n          defaultValue: data[field.name] || false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this);\n      break;\n\n    case FieldType.file:\n      return /*#__PURE__*/_jsxDEV(Controller, {\n        render: props => {\n          var _field$rules11;\n\n          return /*#__PURE__*/_jsxDEV(FileInput, {\n            label: field.label + (((_field$rules11 = field.rules) === null || _field$rules11 === void 0 ? void 0 : _field$rules11.required) === true ? ' *' : ''),\n            name: field.name,\n            accept: field.accept || '',\n            multiple: field.multiple,\n            error: error,\n            value: props.value,\n            max: field.rules.max,\n            onChange: field.onChange,\n            methods: form,\n            onRemove: file => {\n              field.onRemove && field.onRemove(file);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this);\n        },\n        defaultValue: (_ref4 = data && data[field.name]) !== null && _ref4 !== void 0 ? _ref4 : null,\n        name: field.name,\n        label: field.label,\n        control: control,\n        error: !!error,\n        rules: rules\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this);\n      break;\n\n    case FieldType.br:\n      return /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 14\n      }, this);\n      break;\n\n    default:\n      return /*#__PURE__*/_jsxDEV(Controller, {\n        render: props => {\n          var _field$rules12;\n\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              variant: variant,\n              fullWidth: true,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                error: !!error,\n                label: field.label + (((_field$rules12 = field.rules) === null || _field$rules12 === void 0 ? void 0 : _field$rules12.required) === true ? ' *' : ''),\n                placeholder: field.label,\n                name: field.name,\n                id: field.name,\n                variant: variant,\n                fullWidth: true,\n                helperText: error || field.help,\n                inputRef: props.ref,\n                onChange: e => {\n                  props.onChange(e.target.value);\n                  field.onChange && field.onChange(e.target.value, form);\n                },\n                disabled: field.disabled // value={(data && data[field.name]) ?? ''}\n                ,\n                value: props.value,\n                InputProps: inputProps\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this)\n          }, void 0, false);\n        } // value={(data && data[field.name]) ?? ''}\n        ,\n        defaultValue: (_ref5 = data && data[field.name]) !== null && _ref5 !== void 0 ? _ref5 : '',\n        name: field.name,\n        label: field.label,\n        control: control,\n        error: !!error,\n        rules: rules\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this);\n      break;\n  }\n}","map":{"version":3,"sources":["/reintegros/reintegros-frontend/components/builder/FieldRender.tsx"],"names":["TextField","Checkbox","RadioGroup","FormControl","FormControlLabel","Radio","FormHelperText","FormLabel","InputLabel","Select","MenuItem","InputAdornment","Box","KeyboardDatePicker","KeyboardTimePicker","MuiPickersUtilsProvider","esLocale","React","Controller","FieldType","DateFnsUtils","format","parseISO","FORM_BUILDER","FieldAutocomplete","FileInput","DatePicker","TimePicker","getError","field","errors","name","type","required","min","rules","minLength","max","maxLength","message","pattern","unique","default","getRules","form","validate","oldMethod","FieldRender","data","control","variant","error","component","inputProps","prefix","startAdornment","suffix","endAdornment","getMaxDate","f","Date","getMinDate","date","label","props","value","e","onChange","ref","disabled","shrink","undefined","time","placeholder","int","event","setValue","parseFloat","target","onBlur","float","help","newVal","regex","test","Number","options","Array","isArray","multiple","map","elem","index","boolean","checked","radio","opt","i","color","file","accept","onRemove","br"],"mappings":"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","sourcesContent":["import {\n  TextField,\n  Checkbox,\n  RadioGroup,\n  FormControl,\n  FormControlLabel,\n  Radio,\n  FormHelperText,\n  FormLabel,\n  InputLabel,\n  Select,\n  MenuItem,\n  OutlinedInputProps,\n  InputAdornment,\n  Box,\n} from '@material-ui/core';\nimport {\n  KeyboardDatePicker,\n  KeyboardTimePicker,\n  MuiPickersUtilsProvider,\n} from '@material-ui/pickers';\nimport esLocale from 'date-fns/locale/es';\nimport React from 'react';\nimport { Controller } from 'react-hook-form';\nimport { FieldType, FormField } from './FormField';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { format, parseISO, subDays } from 'date-fns';\nimport { FORM_BUILDER } from '../../labels';\nimport FieldAutocomplete from './FieldAutocomplete';\nimport FileInput from '../common/FileInput';\n\n// Needed for prevent passing 'value' and 'onChange' props\nconst DatePicker: any = KeyboardDatePicker;\nconst TimePicker: any = KeyboardTimePicker;\ntype Props = {\n  field: any;\n  form: any;\n  data: any;\n};\n\nexport const getError = (field: any, errors: any) => {\n  if (errors && errors[field.name]) {\n    switch (errors[field.name].type) {\n      case 'required':\n        return FORM_BUILDER.required;\n      case 'min':\n        return `${FORM_BUILDER.min} ${field.rules?.min}`;\n      case 'minLength':\n        return `${FORM_BUILDER.minLength} ${field.rules?.minLength}`;\n      case 'max':\n        return `${FORM_BUILDER.max} ${field.rules?.max}`;\n      case 'maxLength':\n        return `${FORM_BUILDER.maxLength} ${field.rules?.maxLength}`;\n      case 'pattern':\n        return errors[field.name].message || FORM_BUILDER.pattern;\n      case 'validate':\n        return errors[field.name].message;\n      case 'unique':\n        return `${FORM_BUILDER.unique}`;\n      default:\n        return errors[field.name].message || FORM_BUILDER.default;\n      // return FORM_BUILDER.default;\n    }\n  } else {\n    return null;\n  }\n};\n\nexport const getRules = (field, form) => {\n  const rules = field.rules || {};\n  if (rules.validate) {\n    const oldMethod = rules.validate;\n    rules.validate = () => oldMethod(form);\n  }\n  return rules;\n};\nexport default function FieldRender({ field, form, data }: Props) {\n  const { control, errors } = form;\n  const variant = 'standard';\n\n  const error = getError(field, errors);\n  const rules = getRules(field, form);\n  if (field.component === 'email') {\n    rules.pattern = /^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n  }\n  // Prefix & Suffix\n  const inputProps: Partial<OutlinedInputProps> = {};\n  if (field.prefix) {\n    inputProps.startAdornment = <InputAdornment position=\"start\">{field.prefix}</InputAdornment>;\n  }\n  if (field.suffix) {\n    inputProps.endAdornment = <InputAdornment position=\"end\">{field.suffix}</InputAdornment>;\n  }\n\n  const getMaxDate = (f) => {\n    return f?.rules?.max || new Date(2100, 10, 1);\n  };\n\n  const getMinDate = (f) => {\n    return f?.rules?.min || new Date(1900, 10, 1);\n  };\n\n  switch (field.type) {\n    case FieldType.date:\n      return (\n        <MuiPickersUtilsProvider utils={DateFnsUtils} locale={esLocale}>\n          <Controller\n            variant={variant}\n            name={field.name}\n            label={field.label + (field.rules?.required === true ? ' *' : '')}\n            control={control}\n            error={!!error}\n            rules={rules}\n            initialFocusedDate={null}\n            defaultValue={\n              (data[field.name] && format(parseISO(data[field.name]), 'MM/dd/yyyy')) ?? ''\n            }\n            render={(props) => (\n              <DatePicker\n                value={props.value || null}\n                onChange={(e) => {\n                  props.onChange(e);\n                  field.onChange && field.onChange(e, form);\n                }}\n                inputRef={props.ref}\n                maxDate={getMaxDate(field)}\n                minDate={getMinDate(field)}\n                // maxDate={field?.rules?.max || new Date(2100, 10, 1)}\n                // minDate={field?.rules?.max || new Date(1900, 10, 1)}\n\n                autoOk\n                disableToolbar\n                variant={variant}\n                format=\"dd/MM/yyyy\"\n                inputVariant={variant}\n                fullWidth={true}\n                label={field.label}\n                helperText={error}\n                error={error}\n                disabled={field.disabled}\n                KeyboardButtonProps={{\n                  'aria-label': 'change date',\n                }}\n                InputLabelProps={{\n                  shrink: props.value ? true : undefined,\n                }}\n              />\n            )}\n          />\n        </MuiPickersUtilsProvider>\n      );\n      break;\n\n    case FieldType.time:\n      return (\n        <MuiPickersUtilsProvider utils={DateFnsUtils} locale={esLocale}>\n          <Controller\n            variant={variant}\n            error={!!error}\n            rules={rules}\n            render={(props) => (\n              <TimePicker\n                value={props.value}\n                onChange={props.onChange}\n                inputRef={props.ref}\n                autoOk\n                variant=\"inline\"\n                disableToolbar\n                inputVariant={variant}\n                fullWidth={true}\n                label={field.label + (field.rules?.required === true ? ' *' : '')}\n                error={!!error}\n                helperText={error}\n                disabled={field.disabled}\n                format=\"HH:mm\"\n                KeyboardButtonProps={{\n                  'aria-label': 'change time',\n                }}\n              />\n            )}\n            name={field.name}\n            placeholder={field.placeholder}\n            control={control}\n          />\n        </MuiPickersUtilsProvider>\n      );\n      break;\n    case FieldType.int:\n      return (\n        <Controller\n          render={(props) => (\n            <TextField\n              label={field.label + (field.rules?.required === true ? ' *' : '')}\n              value={props.value}\n              name={field.name}\n              variant={variant}\n              fullWidth={true}\n              type=\"number\"\n              helperText={error}\n              error={!!error}\n              inputRef={props.ref}\n              onChange={(event) => {\n                form.setValue(field.name, parseFloat(event.target.value));\n                field.onChange && field.onChange(parseFloat(event.target.value), form);\n              }}\n              onBlur={(event) => {\n                field.onBlur && field.onBlur(event.target.value, form);\n              }}\n              InputProps={inputProps}\n              disabled={field.disabled}\n            />\n          )}\n          defaultValue={data[field.name]}\n          type=\"number\"\n          name={field.name}\n          label={field.label}\n          control={control}\n          error={!!error}\n          rules={rules}\n        />\n      );\n    case FieldType.float:\n      return (\n        <Controller\n          render={(props) => (\n            <TextField\n              label={field.label + (field.rules?.required === true ? ' *' : '')}\n              value={props.value}\n              name={field.name}\n              type=\"number\"\n              variant={variant}\n              error={!!error}\n              fullWidth={true}\n              helperText={error || field.help}\n              inputRef={props.ref}\n              onChange={({ target: { value } }) => {\n                let newVal = 0;\n                const regex = /^\\d+(\\.\\d{0,2})?$/;\n                if (regex.test(value)) {\n                  newVal = Number(value);\n                } else {\n                  newVal = Number(props.value);\n                }\n                form.setValue(field.name, newVal);\n                props.onChange && props.onChange(newVal);\n              }}\n              onFocus={({ target: { value } }) => {\n                if (value === '0') {\n                  form.setValue(field.name, '');\n                }\n              }}\n            />\n          )}\n          defaultValue={(data && data[field.name]) ?? 0}\n          name={field.name}\n          label={field.label}\n          control={control}\n          error={!!error}\n          rules={rules}\n        />\n      );\n      break;\n\n    case FieldType.options:\n      if (!Array.isArray(field.options)) {\n        return <FieldAutocomplete field={field} error={error} rules={rules} form={form} />;\n      } else {\n        return (\n          <FormControl variant={variant} fullWidth={true}>\n            <InputLabel>{field.label + (field.rules?.required === true ? ' *' : '')}</InputLabel>\n            <Controller\n              control={control}\n              name={field.name}\n              id={field.name}\n              error={!!error}\n              disabled={field.disabled}\n              rules={rules}\n              defaultValue={(data && data[field.name]) ?? ''}\n              render={(props) => (\n                <>\n                  <Select\n                    label={field.label}\n                    value={props.value}\n                    error={error}\n                    onChange={(e) => {\n                      props.onChange(e?.target?.value ?? null);\n                      field.onChange && field.onChange(e?.target?.value, form);\n                    }}\n                    disabled={field.disabled}\n                    multiple={field.multiple}\n                  >\n                    {field.options.map((elem, index) => (\n                      <MenuItem key={index} value={elem.value}>\n                        {elem.label}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </>\n              )}\n            />\n            {error && <FormHelperText className={'Mui-error'}>{error}</FormHelperText>}\n          </FormControl>\n        );\n      }\n      break;\n\n    case FieldType.boolean:\n      return (\n        <FormControlLabel\n          control={\n            <Controller\n              error={!!error}\n              rules={rules}\n              helperText={error}\n              variant={variant}\n              fullWidth={true}\n              label={field.label + (field.rules?.required === true ? ' *' : '')}\n              render={(props) => (\n                <Checkbox\n                  onChange={(event) => {\n                    form.setValue(field.name, event.target.checked);\n                    field.onChange && field.onChange(event.target.checked, form);\n                  }}\n                  checked={props.value}\n                />\n              )}\n              valueName=\"checked\"\n              name={field.name}\n              control={control}\n              color=\"primary\"\n              disabled={field.disabled}\n              defaultValue={data[field.name] || false}\n            />\n          }\n          label={field.label}\n        />\n      );\n      break;\n    case FieldType.radio:\n      return (\n        <FormControlLabel\n          label={''}\n          control={\n            <Controller\n              error={!!error}\n              rules={rules}\n              helperText={error}\n              variant={variant}\n              fullWidth={true}\n              label={field.label}\n              render={(props) => (\n                <Box>\n                  <RadioGroup\n                    name={field.name}\n                    onChange={(event) => {\n                      form.setValue(field.name, event.target.value);\n                      field.onChange && field.onChange(event.target.value, form);\n                    }}\n                    value={props.value}\n                  >\n                    <FormLabel component=\"legend\">{field.label}</FormLabel>\n                    {field.options?.map((opt, i) => {\n                      return (\n                        <FormControlLabel\n                          value={opt.value}\n                          control={<Radio />}\n                          label={opt.label}\n                          key={i}\n                        />\n                      );\n                    })}\n                  </RadioGroup>\n                  <FormHelperText style={{ color: 'red' }}>{error}</FormHelperText>\n                </Box>\n              )}\n              valueName=\"checked\"\n              name={field.name}\n              control={control}\n              color=\"primary\"\n              disabled={field.disabled}\n              defaultValue={data[field.name] || false}\n            />\n          }\n        />\n      );\n      break;\n    case FieldType.file:\n      return (\n        <Controller\n          render={(props) => (\n            <FileInput\n              label={field.label + (field.rules?.required === true ? ' *' : '')}\n              name={field.name}\n              accept={field.accept || ''}\n              multiple={field.multiple}\n              error={error}\n              value={props.value}\n              max={field.rules.max}\n              onChange={field.onChange}\n              methods={form}\n              onRemove={(file) => {\n                field.onRemove && field.onRemove(file);\n              }}\n            />\n          )}\n          defaultValue={(data && data[field.name]) ?? null}\n          name={field.name}\n          label={field.label}\n          control={control}\n          error={!!error}\n          rules={rules}\n        />\n      );\n      break;\n    case FieldType.br:\n      return <br></br>;\n      break;\n    default:\n      return (\n        <Controller\n          render={(props) => (\n            <>\n              <FormControl variant={variant} fullWidth={true}>\n                {/* <InputLabel htmlFor={field.name}>\n                  {field.label}\n                </InputLabel> */}\n                <TextField\n                  error={!!error}\n                  label={field.label + (field.rules?.required === true ? ' *' : '')}\n                  placeholder={field.label}\n                  name={field.name}\n                  id={field.name}\n                  variant={variant}\n                  fullWidth={true}\n                  helperText={error || field.help}\n                  inputRef={props.ref}\n                  onChange={(e) => {\n                    props.onChange(e.target.value);\n                    field.onChange && field.onChange(e.target.value, form);\n                  }}\n                  disabled={field.disabled}\n                  // value={(data && data[field.name]) ?? ''}\n                  value={props.value}\n                  InputProps={inputProps}\n                />\n              </FormControl>\n            </>\n          )}\n          // value={(data && data[field.name]) ?? ''}\n          defaultValue={(data && data[field.name]) ?? ''}\n          name={field.name}\n          label={field.label}\n          control={control}\n          error={!!error}\n          rules={rules}\n        />\n      );\n      break;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}