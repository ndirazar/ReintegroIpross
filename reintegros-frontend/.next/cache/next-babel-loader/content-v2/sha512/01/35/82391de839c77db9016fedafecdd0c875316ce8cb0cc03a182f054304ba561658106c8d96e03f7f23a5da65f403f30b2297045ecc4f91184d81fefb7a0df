{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/reintegros/reintegros-frontend/components/solicitudes/prestaciones/FormPrestaciones.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Box, Grid, Button, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport { STEPPER_SOLICITUDES } from '../../../labels';\nimport { send } from '../../api-call/service';\nimport Form from '../../builder';\nimport FieldRender from '../../builder/FieldRender';\nimport configFactura from '../facturas/FormConfig';\nimport configPrestaciones from './FormConfig';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport PublishIcon from '@material-ui/icons/Publish';\nimport useStyles from '../Stepper.styles';\nimport { ListaPrestacion } from './ListaPrestaciones';\nexport const FormPrestaciones = ({\n  formContent,\n  step,\n  addPrestacion,\n  prestaciones,\n  removePrestacion\n}) => {\n  const {\n    0: factura,\n    1: setFactura\n  } = useState(null);\n  const {\n    0: continuar,\n    1: setContinuar\n  } = useState(true);\n  const methods = useFormContext();\n  const {\n    reset,\n    register\n  } = methods;\n  const classes = useStyles();\n  useEffect(() => {\n    reset(_objectSpread({}, formContent.two), {\n      errors: true\n    });\n  }, []);\n\n  const handelSubmitFactura = async data => {\n    try {\n      const formData = new FormData();\n      formData.append('archivo', data.factura);\n      formData.append('etiqueta', '1');\n      const resFactura = await send({\n        url: 'api/facturas/',\n        data: formData,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      if (resFactura.status === 201) {\n        setFactura(resFactura.data);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    margin: 3,\n    children: [/*#__PURE__*/_jsxDEV(ListaPrestacion, {\n      prestaciones: prestaciones,\n      buttons: [{\n        action: removePrestacion,\n        icon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 53\n        }, this)\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), continuar && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          config: configFactura,\n          data: [],\n          onSubmit: handelSubmitFactura,\n          submitButton: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            type: \"submit\",\n            endIcon: /*#__PURE__*/_jsxDEV(PublishIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 28\n            }, this),\n            className: classes.button,\n            children: \"Subir\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this),\n          buttonsWidth: 5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: classes.form,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            gutterBottom: true,\n            children: step.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            gutterBottom: true,\n            children: step.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n            disabled: factura === null,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              children: [configPrestaciones.map((field, index) => {\n                var _field$styling;\n\n                return /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  md: ((_field$styling = field.styling) === null || _field$styling === void 0 ? void 0 : _field$styling.columns) || 12,\n                  children: /*#__PURE__*/_jsxDEV(FieldRender, {\n                    field: field,\n                    form: methods,\n                    data: []\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 23\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 21\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                color: \"primary\",\n                onClick: () => {\n                  addPrestacion(factura === null || factura === void 0 ? void 0 : factura.id);\n                  reset();\n                },\n                className: classes.button,\n                children: STEPPER_SOLICITUDES.saveAndContinue\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                color: \"primary\",\n                onClick: () => {\n                  addPrestacion(factura === null || factura === void 0 ? void 0 : factura.id);\n                  reset();\n                  setContinuar(false);\n                },\n                className: classes.button,\n                children: STEPPER_SOLICITUDES.save\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};","map":{"version":3,"sources":["/reintegros/reintegros-frontend/components/solicitudes/prestaciones/FormPrestaciones.tsx"],"names":["Box","Grid","Button","Typography","React","useEffect","useState","useFormContext","STEPPER_SOLICITUDES","send","Form","FieldRender","configFactura","configPrestaciones","DeleteIcon","PublishIcon","useStyles","ListaPrestacion","FormPrestaciones","formContent","step","addPrestacion","prestaciones","removePrestacion","factura","setFactura","continuar","setContinuar","methods","reset","register","classes","two","errors","handelSubmitFactura","data","formData","FormData","append","resFactura","url","method","headers","status","error","console","log","action","icon","button","form","title","description","map","field","index","styling","columns","id","saveAndContinue","save"],"mappings":"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","sourcesContent":["import {\n  Box,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n  Grid,\n  Button,\n  Typography,\n  IconButton,\n  ListItemSecondaryAction,\n} from '@material-ui/core';\nimport { parseISO, format } from 'date-fns';\n\nimport React, { useEffect, useState } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport { DATE_FORMAT, STEPPER_SOLICITUDES } from '../../../labels';\nimport { send } from '../../api-call/service';\nimport Form from '../../builder';\nimport FieldRender from '../../builder/FieldRender';\nimport configFactura from '../facturas/FormConfig';\nimport configPrestaciones from './FormConfig';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport PublishIcon from '@material-ui/icons/Publish';\nimport useStyles from '../Stepper.styles';\nimport { ListaPrestacion } from './ListaPrestaciones';\nimport { LabelSharp } from '@material-ui/icons';\n\nexport const FormPrestaciones = ({\n  formContent,\n  step,\n  addPrestacion,\n  prestaciones,\n  removePrestacion,\n}) => {\n  const [factura, setFactura] = useState(null);\n  const [continuar, setContinuar] = useState(true);\n  const methods = useFormContext();\n  const { reset, register } = methods;\n  const classes = useStyles();\n  useEffect(() => {\n    reset({ ...formContent.two }, { errors: true });\n  }, []);\n  const handelSubmitFactura = async (data) => {\n    try {\n      const formData = new FormData();\n      formData.append('archivo', data.factura);\n      formData.append('etiqueta', '1');\n      const resFactura = await send({\n        url: 'api/facturas/',\n        data: formData,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      if (resFactura.status === 201) {\n        setFactura(resFactura.data);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <Box margin={3}>\n      <ListaPrestacion\n        prestaciones={prestaciones}\n        buttons={[{ action: removePrestacion, icon: <DeleteIcon /> }]}\n      />\n      {continuar && (\n        <>\n          <Grid container spacing={2}>\n            <Form\n              config={configFactura}\n              data={[]}\n              onSubmit={handelSubmitFactura}\n              submitButton={\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  type=\"submit\"\n                  endIcon={<PublishIcon />}\n                  className={classes.button}\n                >\n                  Subir\n                </Button>\n              }\n              buttonsWidth={5}\n            />\n          </Grid>\n          <Box className={classes.form}>\n            <Box>\n              <Typography variant=\"h5\" gutterBottom>\n                {step.title}\n              </Typography>\n              <Typography variant=\"subtitle1\" gutterBottom>\n                {step.description}\n              </Typography>\n            </Box>\n            <form>\n              <fieldset disabled={factura === null}>\n                <Grid container spacing={2}>\n                  {configPrestaciones.map((field, index) => (\n                    <Grid key={index} item md={(field.styling?.columns as any) || 12}>\n                      <FieldRender field={field} form={methods} data={[]} />\n                    </Grid>\n                  ))}\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={() => {\n                      addPrestacion(factura?.id);\n                      reset();\n                    }}\n                    className={classes.button}\n                  >\n                    {STEPPER_SOLICITUDES.saveAndContinue}\n                  </Button>\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={() => {\n                      addPrestacion(factura?.id);\n                      reset();\n                      setContinuar(false);\n                    }}\n                    className={classes.button}\n                  >\n                    {STEPPER_SOLICITUDES.save}\n                  </Button>\n                </Grid>\n              </fieldset>\n            </form>\n          </Box>\n        </>\n      )}\n    </Box>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}