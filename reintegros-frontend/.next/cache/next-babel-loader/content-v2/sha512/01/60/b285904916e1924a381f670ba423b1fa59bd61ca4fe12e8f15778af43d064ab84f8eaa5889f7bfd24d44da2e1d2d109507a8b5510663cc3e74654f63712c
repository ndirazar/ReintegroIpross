{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/reintegros/reintegros-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/reintegros/reintegros-frontend/components/auditorias/Auditorias.tsx\",\n    _s = $RefreshSig$();\n\nimport { Box, Typography } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport useSWR from 'swr';\nimport AuditoriasForm from './AuditoriasForm';\nimport AuditoriasList from './AuditoriasList';\nimport { post, remove } from '../api-call/service';\nimport Loading from '../common/Loading';\nimport { ERRORS, LOADING, AUDITORIAS, PRESTACIONES } from '../../labels';\nimport Alert from '../common/Alert';\nimport Modal from '../common/Modal';\nexport default function Auditorias() {\n  _s();\n\n  var _useSWR = useSWR(PRESTACIONES.route),\n      data = _useSWR.data,\n      errotOnGet = _useSWR.error,\n      mutate = _useSWR.mutate;\n\n  var _useState = useState(false),\n      openForm = _useState[0],\n      setOpenForm = _useState[1];\n\n  var _useState2 = useState(null),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(null),\n      currentData = _useState3[0],\n      setCurrentData = _useState3[1];\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return post(AUDITORIAS.route, {\n                prestacion: currentData === null || currentData === void 0 ? void 0 : currentData.id,\n                auditorAsignado: 2,\n                actualizadoPor: 2,\n                motivoDeRechazo: data.motivoDeRechazo,\n                porcentajeDeCobertura: parseInt(data.cobertura),\n                montoAReintegrar: parseFloat(data.montoReintegrar)\n              });\n\n            case 3:\n              _context.next = 8;\n              break;\n\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](0);\n              //TODO handle error\n              console.log(_context.t0);\n\n            case 8:\n              setCurrentData(null);\n              setOpenForm(false);\n              mutate();\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 5]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleCancel = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setCurrentData(null);\n              setOpenForm(false);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleCancel() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return remove(AUDITORIAS.route, id);\n\n            case 3:\n              setError(null);\n              _context3.next = 9;\n              break;\n\n            case 6:\n              _context3.prev = 6;\n              _context3.t0 = _context3[\"catch\"](0);\n              setError('onDelete');\n\n            case 9:\n              mutate();\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 6]]);\n    }));\n\n    return function handleDelete(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onAudit = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setOpenForm(false);\n              setCurrentData(data);\n              setOpenForm(true);\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function onAudit(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      p: 2,\n      m: 1,\n      children: [openForm && /*#__PURE__*/_jsxDEV(Modal, {\n        customClasses: {},\n        open: true,\n        onClose: function onClose() {\n          return setOpenForm(false);\n        },\n        title: 'Auditar prestación',\n        breadcrumbs: '',\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            gutterBottom: true,\n            children: \"Verifica la documentaci\\xF3n requerida y cobertura definida\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            gutterBottom: true,\n            children: \"Factura\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            gutterBottom: true,\n            children: \"Historia clinica\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(AuditoriasForm, {\n          data: currentData,\n          handleSubmit: handleSubmit,\n          handleCancel: handleCancel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), data && /*#__PURE__*/_jsxDEV(AuditoriasList, {\n        data: data,\n        handleDelete: handleDelete,\n        onAudit: onAudit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Loading, {\n      loading: !data,\n      message: LOADING(AUDITORIAS.name)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Alert, {\n      open: errotOnGet || error,\n      severity: \"error\",\n      message: error ? ERRORS[error](AUDITORIAS.name) : ERRORS.onGet(AUDITORIAS.name)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Auditorias, \"VM/s4UrGLzbKJRli1mjkFGoXCZ0=\", false, function () {\n  return [useSWR];\n});\n\n_c = Auditorias;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auditorias\");","map":{"version":3,"sources":["/reintegros/reintegros-frontend/components/auditorias/Auditorias.tsx"],"names":["Box","Typography","React","useState","useSWR","AuditoriasForm","AuditoriasList","post","remove","Loading","ERRORS","LOADING","AUDITORIAS","PRESTACIONES","Alert","Modal","Auditorias","route","data","errotOnGet","error","mutate","openForm","setOpenForm","setError","currentData","setCurrentData","handleSubmit","prestacion","id","auditorAsignado","actualizadoPor","motivoDeRechazo","porcentajeDeCobertura","parseInt","cobertura","montoAReintegrar","parseFloat","montoReintegrar","console","log","handleCancel","handleDelete","onAudit","name","onGet"],"mappings":"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","sourcesContent":["import { Box, Typography } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport useSWR from 'swr';\nimport AuditoriasForm from './AuditoriasForm';\nimport AuditoriasList from './AuditoriasList';\nimport { post, put, remove } from '../api-call/service';\nimport Loading from '../common/Loading';\nimport { ACTIONS, ERRORS, LOADING, AUDITORIAS, PRESTACIONES } from '../../labels';\nimport Alert from '../common/Alert';\nimport { Action } from '../common/types/Action';\nimport ActionBar from '../common/ActionBar';\nimport SaveIcon from '@material-ui/icons/Save';\nimport Modal from '../common/Modal';\n\nexport default function Auditorias() {\n  const { data, error: errotOnGet, mutate } = useSWR(PRESTACIONES.route);\n\n  const [openForm, setOpenForm] = useState(false);\n  const [error, setError] = useState(null);\n  const [currentData, setCurrentData] = useState(null);\n\n  const handleSubmit = async (data) => {\n    try {\n      await post(AUDITORIAS.route, {\n        prestacion: currentData?.id,\n        auditorAsignado: 2,\n        actualizadoPor: 2,\n        motivoDeRechazo: data.motivoDeRechazo,\n        porcentajeDeCobertura: parseInt(data.cobertura),\n        montoAReintegrar: parseFloat(data.montoReintegrar),\n      });\n    } catch (error) {\n      //TODO handle error\n      console.log(error);\n    }\n    setCurrentData(null);\n    setOpenForm(false);\n    mutate();\n  };\n\n  const handleCancel = async () => {\n    setCurrentData(null);\n    setOpenForm(false);\n  };\n\n  const handleDelete = async (id: number) => {\n    try {\n      await remove(AUDITORIAS.route, id);\n      setError(null);\n    } catch (error) {\n      setError('onDelete');\n    }\n    mutate();\n  };\n\n  const onAudit = async (data) => {\n    setOpenForm(false);\n    setCurrentData(data);\n    setOpenForm(true);\n  };\n  return (\n    <>\n      <Box p={2} m={1}>\n        {openForm && (\n          <Modal\n            customClasses={{}}\n            open={true}\n            onClose={() => setOpenForm(false)}\n            title={'Auditar prestación'}\n            breadcrumbs={''}\n          >\n            <Box>\n              <Typography variant=\"subtitle1\" gutterBottom>\n                Verifica la documentación requerida y cobertura definida\n              </Typography>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Factura\n              </Typography>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Historia clinica\n              </Typography>\n            </Box>\n            <AuditoriasForm\n              data={currentData}\n              handleSubmit={handleSubmit}\n              handleCancel={handleCancel}\n            />\n          </Modal>\n        )}\n        {data && <AuditoriasList data={data} handleDelete={handleDelete} onAudit={onAudit} />}\n      </Box>\n\n      <Loading loading={!data} message={LOADING(AUDITORIAS.name)} />\n      <Alert\n        open={errotOnGet || error}\n        severity=\"error\"\n        message={error ? ERRORS[error](AUDITORIAS.name) : ERRORS.onGet(AUDITORIAS.name)}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}